{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\Community\\CExtractRecord.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from '../../../../Script/BaseFrame/AudioManager';\r\nimport { CommonCtr } from '../../../../Script/BaseFrame/CommonCtr';\r\nimport ViewBase from '../../../../Script/BaseFrame/ViewBase';\r\nimport HttpHelpEx from '../../../../Script/Common/Managers/HttpHelpEx';\r\nimport { UIUtil } from '../../../../Script/Common/UIUtil';\r\nimport { BaseFrameNative } from '../../../../Script/BaseFrameNative';\r\nimport { LoginViewCtr } from '../../Login/LoginViewCtr';\r\n/**\r\n * @description 基金记录\r\n */\r\nexport default class CExtractRecord extends ViewBase {\r\n    protected get packageResourceName(): string {\r\n        return \"gameHall\";\r\n    }\r\n    protected get packageName(): string {\r\n        return \"res/Lobby\";\r\n    }\r\n    protected get componentName(): string {\r\n        return \"ExtractRecord\";\r\n    }\r\n\r\n    private ui_btn_extractBreak: fgui.GButton = null;\r\n    private ui_extractList: fgui.GList = null;\r\n    private typeDown: fgui.GComboBox = null;\r\n\r\n    private changeType: string[] = [\"全部\", \"轉入\", \"轉出\"];\r\n    private selectChangType: string = \"全部\";\r\n    private recordList: any = null;\r\n\r\n    createChildComponents() {\r\n        super.createChildComponents();\r\n        this.ui_extractList.removeChildrenToPool();\r\n        this.fguiComponent.sortingOrder = 9888;\r\n    }\r\n\r\n    OnLoadCompleted() {\r\n        this.typeDown = this.fguiComponent.getChild(\"n49\").asComboBox;\r\n        this.typeDown.items = this.changeType;\r\n        this.typeDown.text = this.changeType[0];\r\n        this.typeDown.on(fgui.Event.STATUS_CHANGED, this.onChanged, this);\r\n\r\n        this.ui_btn_extractBreak.onClick(() => {\r\n            AudioManager.Singleton.play('CExtractRecord', \"button\");\r\n            this.Hide();\r\n        })\r\n\r\n        this.Show();\r\n    }\r\n\r\n    public Show() {\r\n        super.Show();\r\n        this.selectChangType = this.changeType[0];\r\n        this.getExtractRecordDate();\r\n    }\r\n\r\n    public Hide() {\r\n        super.Hide();\r\n    }\r\n\r\n    public onChanged() {\r\n        AudioManager.Singleton.play('CExtractRecord', \"button\");\r\n        this.selectChangType = this.changeType[this.typeDown.selectedIndex];\r\n        this.initExtractRecordList(this.recordList);\r\n    }\r\n\r\n    public getExtractRecordDate() {\r\n        let self = this;\r\n        // let url = BaseFrameNative.serverlistItem.apiAdress + \"/api/Gamelog/GetFundlog\";\r\n        // let params = {\r\n        //     userid: LoginViewCtr.instance.Model.mPlayerModel.userid,\r\n        //     clubid: LoginViewCtr.instance.Model.cidx\r\n        // }\r\n        // HttpHelpEx.instance.post(url, params).then((res) => {\r\n        //     console.log(\"---GetFundlog---\", res);\r\n        //     if (res.code == 1) {\r\n        //         self.initExtractRecordList(res.data);\r\n        //     } else {\r\n        //         CommonCtr.instance.view.ShowTipLabel(\"获取记录失败\");\r\n        //     }\r\n        // }).catch((err) => {\r\n        //     console.log(\"---err---\", err)\r\n        //     CommonCtr.instance.view.ShowTipLabel(\"获取记录失败\");\r\n        // })\r\n\r\n        let url = BaseFrameNative.serverlistItem.apiAdress + \"/api/Gamelog/GetFundlog\" + `?clubid=${LoginViewCtr.instance.Model.cidx}`;\r\n\r\n        HttpHelpEx.instance.get(url)\r\n            .then((res) => {\r\n                console.log(\"---GetFundlog---\", res);\r\n                if (res.code == 1) {\r\n                    self.recordList = res.data;\r\n                    self.initExtractRecordList(res.data);\r\n                } else {\r\n                    CommonCtr.instance.view.ShowTipLabel(\"获取记录失败\");\r\n                }\r\n            })\r\n            .catch(() => {\r\n                CommonCtr.instance.view.ShowTipLabel(\"获取记录失败\");\r\n            })\r\n    }\r\n\r\n    public initExtractRecordList(m_list: any) {\r\n        this.ui_extractList.removeChildrenToPool();\r\n\r\n        for (let index = 0; index < m_list.length; index++) {\r\n            let data = m_list[index];\r\n            if (this.selectChangType == this.changeType[1] && data.changeType == 1) {\r\n                let item = this.ui_extractList.addItemFromPool().asCom;\r\n                item.getChild(\"n1\").asTextField.text = UIUtil.formatNumber100(data.gold) + \"\"; // 金额\r\n                item.getChild(\"n2\").asTextField.text = data.time + \"\"; // 时间\r\n                item.getChild(\"n4\").asTextField.text = this.changeType[1]; //状态\r\n            }\r\n            if (this.selectChangType == this.changeType[2] && data.changeType != 1) {\r\n                let item = this.ui_extractList.addItemFromPool().asCom;\r\n                item.getChild(\"n1\").asTextField.text = UIUtil.formatNumber100(data.gold) + \"\"; // 金额\r\n                item.getChild(\"n2\").asTextField.text = data.time + \"\"; // 时间\r\n                item.getChild(\"n4\").asTextField.text = this.changeType[2]; //状态\r\n            }\r\n            if (this.selectChangType == this.changeType[0]) {\r\n                let item = this.ui_extractList.addItemFromPool().asCom;\r\n                item.getChild(\"n1\").asTextField.text = UIUtil.formatNumber100(data.gold) + \"\"; // 金额\r\n                item.getChild(\"n2\").asTextField.text = data.time + \"\"; // 时间\r\n                item.getChild(\"n4\").asTextField.text = data.changeType == 1 ? \"轉入\" : \"轉出\"; //状态\r\n            }\r\n        }\r\n    }\r\n}"]}