{"version":3,"sources":["assets\\Script\\BaseFrame\\ViewBase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import FguiComponentBase from \"../modules/@mogafa/fairygui-component/lib/FguiComponentBase\";\n\n\n/**\n * 获取Class的所有可枚举属性\n * @param type\n */\nfunction getPrototypes<T>(clazz: T): Array<string> {\n    return Object.getOwnPropertyNames(clazz);\n}\n\n/**\n * 首字符包含ui_\n * @param str\n */\nconst propertyCondition = function (str: string) {\n    return str.slice(0, 3) == \"ui_\" ? str.slice(3, str.length) : \"\";\n};\n\n/**\n * 内容转换器\n */\nexport default class ViewBase extends FguiComponentBase {\n\n    protected get packageResourceName(): string {\n        return \"\";\n    }\n    protected get packageName(): string {\n        return \"\";\n    }\n    protected get componentName(): string {\n        return \"\";\n    }\n    public mystart: boolean = false;\n    private _parentComponent: fgui.GComponent;\n    public _isDestory: boolean = false;\n\n    createChildComponents(): void {\n        super.createChildComponents();\n        this.AutoSetGoProperty();\n        this._isDestory = false;\n\n        if (this._parentComponent) {\n            this._parentComponent.node.addChild(this.fguiComponent.node);\n            this.fguiComponent._parent = this._parentComponent;\n        }\n    }\n\n    OnLoadStart() {\n        this._isDestory = false;\n    }\n\n    OnLoadCompleted() {\n        console.log(\"--- ViewBase OnLoadCompleted ---\");\n    }\n\n    onDestroy() {\n        super.destroy();\n        this._isDestory = true;\n    }\n\n    Show() {\n        this.node.active = true;\n        if (this._fguiComponent) {\n            this._fguiComponent.visible = true;\n        }\n    }\n\n    Hide() {\n        this._fguiComponent.visible = false;\n        // this.node.active = false;\n    }\n\n    onEnable() {\n\n    }\n\n    onDisable() {\n\n    }\n\n    allChildCreated() {\n        super.allChildCreated();\n        this.OnLoadCompleted();\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.OnLoadStart();\n    }\n\n    public setParentComponent(parentComponent: fgui.GComponent) {\n        this._parentComponent = parentComponent;\n    }\n\n    protected AutoSetGoProperty() {\n        // 判断是不是类\n        const prototypes = getPrototypes(this);\n        let childrenMap: Map<string, any> = new Map<string, any>();\n        childrenMap = this.FindChildren(this.fguiComponent)\n\n        for (const Key of prototypes) {\n            const getKey = propertyCondition(Key);\n            if (getKey == \"\") continue;\n            if (childrenMap.has(getKey)) {\n                this[Key] = childrenMap.get(getKey)\n            }\n        }\n    }\n\n    private FindChildren(view: any): Map<string, any> {\n        let childrenMap: Map<string, any> = new Map<string, any>();\n        if (view._children == null)\n            return childrenMap;\n        for (const child of view._children) {\n            childrenMap.set(child._name, child)\n            let temp: Map<string, any> = this.FindChildren(child)\n            if (temp.size > 0) {\n                temp.forEach((value, key) => {\n                    childrenMap.set(key, value);\n                })\n            }\n        }\n\n        return childrenMap;\n    }\n}"]}