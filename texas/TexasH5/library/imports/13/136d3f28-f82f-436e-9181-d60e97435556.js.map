{"version":3,"sources":["assets\\Games\\texas\\script\\View\\CachePool.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,kEAA6D;AAC7D,qEAAgE;AAChE,2CAA8C;AAE9C;IAAuC,6BAAQ;IAA/C;QAAA,qEA0DC;QAzDW,cAAQ,GAA4B,IAAI,iCAAuB,EAAE,CAAC;;IAyD9E,CAAC;IAvDG,mCAAe,GAAf;QACI,oCAAoC;QACpC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,4BAA4B,EAAE,2BAAc,CAAC,CAAC;QAChF,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,EAAE;YACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,iCAAuB,EAAE,CAAC;SACjD;IACL,CAAC;IAED,qCAAiB,GAAjB,cAAsB,CAAC;IAEhB,kCAAc,GAArB,UAAsB,IAAY,EAAE,MAAuB,EAAE,QAAuB;QAAvB,yBAAA,EAAA,eAAuB;QAChF,IAAI,GAAG,GAAiB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACpD,IAAI,GAAG,IAAI,IAAI,IAAI,QAAQ,IAAI,IAAI,EAAE;YACjC,2BAA2B;YAC3B,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,EAAE,2BAAc,CAAC,CAAA;YACpE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAChC;QAED,IAAI,GAAG,IAAI,IAAI,EAAE;YACb,GAAG,CAAC,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,EAAE,CAAC;YACzB,sEAAsE;YACtE,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;YAC9B,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;SAEtE;QAED,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,iCAAa,GAApB,UAAqB,GAAiB,EAAE,OAAc;QAAd,wBAAA,EAAA,cAAc;QAClD,IAAI,GAAG,IAAI,IAAI,EAAE;YAAE,OAAO;SAAE;QAE5B,IAAI,OAAO,EAAE;YACT,iEAAiE;YACjE,+CAA+C;YAC/C,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;SACzC;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;SACjD;QACD,GAAG,GAAG,IAAI,CAAC;IACf,CAAC;IAEM,iCAAa,GAApB;QACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAED,sBAAsB;IACf,8BAAU,GAAjB,UAAkB,KAAc,EAAE,KAAc;QAC5C,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,CAAC,MAAM,CAAC,qBAAqB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAA;IAC1G,CAAC;IACD,2BAA2B;IACpB,sCAAkB,GAAzB,UAA0B,KAAc,EAAE,KAAc;QACpD,OAAO,KAAK,CAAC,MAAM,CAAC,oBAAoB,CAAC,KAAK,CAAC,MAAM,CAAC,qBAAqB,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAA;IAChG,CAAC;IACL,gBAAC;AAAD,CA1DA,AA0DC,CA1DsC,kBAAQ,GA0D9C;;AAOD;IAAA;IAUA,CAAC;IARG,sBAAkB,0BAAW;aAA7B;YACI,IAAI,WAAW,CAAC,KAAK,IAAI,IAAI,EAAE;gBAC3B,kGAAkG;gBAClG,WAAW,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC9C;YACD,OAAO,WAAW,CAAC,KAAK,CAAC;QAE7B,CAAC;;;OAAA;IARc,iBAAK,GAAY,IAAI,CAAC;IASzC,kBAAC;CAVD,AAUC,IAAA;AAVY,kCAAW","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\nimport InstanceGameObjectCache from \"./InstanceGameObjectCache\";\nimport { UIMoveMonoFgui } from \"./UIMoveMono\";\n\nexport default class CachePool extends ViewBase {\n    private objPools: InstanceGameObjectCache = new InstanceGameObjectCache();\n\n    OnLoadCompleted() {\n        // console.log(\"====CachePool====\");\n        fgui.UIObjectFactory.setExtension(\"ui://Texas/ImgChipTemplete\", UIMoveMonoFgui);\n        if (this.objPools == null) {\n            this.objPools = new InstanceGameObjectCache();\n        }\n    }\n\n    AutoSetGoProperty() { }\n\n    public GetCacheObject(name: string, parent: fgui.GComponent, templete: string = null): fgui.GObject {\n        var obj: fgui.GObject = this.objPools.PopItem(name);\n        if (obj == null && templete != null) {\n            // console.log(\"====创建筹码\");\n            obj = fgui.UIPackage.createObject(\"Texas\", templete, UIMoveMonoFgui)\n            this.node.addChild(obj.node);\n        }\n\n        if (obj != null) {\n            obj.name = name + obj.id;\n            // console.log(\"====设置筹码，parent=\"+parent.name+\" ,  obj = \"+ obj.name);\n            obj.node.parent = parent.node;\n            obj.node.position = this.convertNodeSpaceAR(obj.node, parent.node);\n\n        }\n\n        return obj;\n    }\n\n    public DestroyObject(obj: fgui.GObject, isCache = true): fgui.GObject {\n        if (obj == null) { return; }\n\n        if (isCache) {\n            // console.log(\"----删除筹码，CacheParent =\"+CacheHelper.CacheParent);\n            // obj.node.setParent(CacheHelper.CacheParent);\n            this.objPools.PushItem(obj, obj.name);\n        }\n        else {\n            this.objPools.DestroyExistItem(obj, obj.name);\n        }\n        obj = null;\n    }\n\n    public ClearAllCache() {\n        this.objPools.cleanAll();\n    }\n\n    // 把 node1移动到 node2的位置\n    public moveN1toN2(node1: cc.Node, node2: cc.Node) {\n        node1.position = node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position))\n    }\n    // 获取把 node1移动到 node2位置后的坐标\n    public convertNodeSpaceAR(node1: cc.Node, node2: cc.Node): cc.Vec3 {\n        return node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position))\n    }\n}\n\n\n\n\n\n\nexport class CacheHelper {\n    private static cache: cc.Node = null;\n    public static get CacheParent(): cc.Node {\n        if (CacheHelper.cache == null) {\n            // CacheHelper.CacheParent.destroy();// GameObject.DontDestroyOnLoad(this.CacheParent.gameObject);\n            CacheHelper.cache = new cc.Node(\"_cache_\");\n        }\n        return CacheHelper.cache;\n\n    }\n}"]}