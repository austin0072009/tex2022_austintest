{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\entertainment\\GameItemInEntertainment.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,gDAA2C;AAE3C;;GAEG;AACH;IAAqD,2CAAY;IAAjE;;IAmDA,CAAC;IAlDa,6CAAW,GAArB;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;QAC/C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC;QAChE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC;IAClE,CAAC;IAOM,yCAAO,GAAd,UAAe,MAAc,EAAE,KAAa,EAAE,QAAiB;QAC3D,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,aAAa,GAAG,KAAK,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC;QAC7B,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,EAAE,CAAC;IAChC,CAAC;IAEM,6CAAW,GAAlB,UAAmB,IAAY,EAAE,SAAiB;QAC9C,IAAI,SAAS,IAAI,CAAC,EAAE;YAChB,OAAO;SACV;QACD,IAAI,QAAQ,GAAG,IAAI,GAAG,SAAS,CAAC;QAChC,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAE;YACjB,QAAQ,GAAG,CAAC,CAAC;SAChB;QACD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7C,IAAI,CAAC,YAAY,CAAC,IAAI,GAAM,IAAI,WAAM,SAAS,OAAI,CAAC;QACpD,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC;QACpC,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;QAE3D,IAAI,QAAQ,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,EAAE,CAAC;YAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,EAAE,CAAC;YAC5B,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACzE;IACL,CAAC;IAED,UAAU;IACH,4CAAU,GAAjB;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,IAAI,GAAG,EAAE,CAAC;IAChC,CAAC;IAEL,8BAAC;AAAD,CAnDA,AAmDC,CAnDoD,IAAI,CAAC,OAAO,GAmDhE","file":"","sourceRoot":"/","sourcesContent":["import LobbyViewCtr from \"../LobbyViewCtr\";\r\n\r\n/**\r\n * @description 娛樂 游戲item\r\n */\r\nexport default class GameItemInEntertainment extends fgui.GButton {\r\n    protected onConstruct() {\r\n        this.iconLoader = this.getChild(\"n0\").asLoader;\r\n        this.dark = this.getChild(\"dark\").asImage;\r\n        this.progressLabel = this.getChild(\"progressLabel\").asTextField;\r\n        this.progresssize = this.getChild(\"progresssize\").asTextField;\r\n    }\r\n    public gameId: number;\r\n    public icons: string;\r\n    public iconLoader: fgui.GLoader;\r\n    private dark: fgui.GImage;\r\n    private progressLabel: fgui.GTextField;\r\n    private progresssize: fgui.GTextField;\r\n    public setData(gameId: number, icons: string, isUpdate: boolean) {\r\n        this.gameId = gameId;\r\n        this.icons = icons;\r\n        this.iconLoader.url = \"ui://Lobby/\" + icons;\r\n        this.dark.visible = isUpdate;\r\n        this.dark.fillAmount = 1;\r\n        this.progressLabel.text = '';\r\n        this.progresssize.text = '';\r\n    }\r\n\r\n    public setProgress(size: number, totleSize: number) {\r\n        if (totleSize == 0) {\r\n            return;\r\n        }\r\n        let progress = size / totleSize;\r\n        if (isNaN(progress)) {\r\n            progress = 0;\r\n        }\r\n        console.log(\"this.gameId === \", this.gameId);\r\n        this.progresssize.text = `${size}kb/${totleSize}kb`;\r\n        this.dark.fillAmount = 1 - progress;\r\n        this.progressLabel.text = Math.floor(progress * 100) + '%';\r\n\r\n        if (progress >= 1) {\r\n            this.progressLabel.text = '';\r\n            this.progresssize.text = '';\r\n            LobbyViewCtr.instance.view.entertainmentView.changedData(this.gameId);\r\n        }\r\n    }\r\n\r\n    /**更新失败 */\r\n    public updateFild() {\r\n        this.dark.visible = true;\r\n        this.dark.fillAmount = 1;\r\n        this.progressLabel.text = '';\r\n        this.progresssize.text = '';\r\n    }\r\n\r\n}"]}