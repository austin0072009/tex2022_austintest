{"version":3,"sources":["assets\\Script\\modules\\@slotsmaster\\ui-common\\lib\\Card\\CardGet.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Popup } from \"../Popup\";\n\nexport class CardGet extends Popup {\n    protected get basePanel(): string {\n        return \"base\";\n    }\n    protected get animNode(): cc.Node[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    protected get buttonOKName(): string {\n        return \"closeButton\";\n    }\n    protected get goldGrowName(): string[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    protected get normalNumName(): string[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    protected get packageResourceName(): string {\n        return \"GameCommon\";\n    }\n    protected get packageName(): string {\n        return \"Common\";\n    }\n    protected get componentName(): string {\n        return \"CardGet\";\n    }\n    get closeTime(): number {\n        return -1;\n    }\n    private _moveClip: fgui.GMovieClip;\n    private _cardCount: number = 0;\n    private _callBack: Function;\n    private _initY: number = 230;\n    protected createChildComponents() {\n        super.createChildComponents();\n    }\n    private getPosX(): number {\n        let designSize = cc.view.getDesignResolutionSize().width;\n        let visibleSize = cc.view.getVisibleSize().width;\n        let size = 960 + (visibleSize - designSize) / 2;\n        return size;\n    }\n    private playAction(): void {\n        switch (this._cardCount) {\n            case 1:\n                this.actionOne();\n                break;\n            case 2:\n                this.actionTwo();\n                break;\n            case 3:\n                this.actionThree();\n                break;\n            case 4:\n                this.actionFour();\n                break;\n            default:\n                break;\n        }\n    }\n    private actionOne(): void {\n        let self = this;\n        let item1 = this._base.getChild(\"0\").asCom;\n        let callBack = cc.callFunc(function () {\n            self.moveAllItemBottom();\n        });\n        item1.node.runAction(cc.sequence(cc.delayTime(2), callBack));\n    }\n    private actionTwo(): void {\n        let self = this;\n        let item1 = this._base.getChild(\"0\").asCom;\n        let item2 = this._base.getChild(\"1\").asCom;\n        let action1 = cc.moveBy(1, -230, 0);\n        let action2 = cc.rotateBy(1, -5);\n        let action3 = cc.moveBy(1, 230, 0);\n        let action4 = cc.rotateBy(1, 5);\n\n        let callBack = cc.callFunc(function () {\n            self.moveAllItemBottom();\n        });\n        item1.node.runAction(cc.spawn(action1, action2));\n        item2.node.runAction(cc.sequence(cc.spawn(action3, action4), cc.delayTime(2), callBack));\n    }\n    private actionThree(): void {\n        let self = this;\n        let item1 = this._base.getChild(\"0\").asCom;\n        let item2 = this._base.getChild(\"1\").asCom;\n        let action1 = cc.moveBy(1, -458, -30);\n        let action2 = cc.rotateBy(1, -5);\n        let action3 = cc.moveBy(1, 458, -30);\n        let action4 = cc.rotateBy(1, 5);\n\n        let callBack = cc.callFunc(function () {\n            self.moveAllItemBottom();\n        });\n        item1.node.runAction(cc.spawn(action1, action2));\n        item2.node.runAction(cc.sequence(cc.spawn(action3, action4), cc.delayTime(2), callBack));\n    }\n    private actionFour(): void {\n        this.actionTwo();\n        let self = this;\n        let item1 = this._base.getChild(\"2\").asCom;\n        let item2 = this._base.getChild(\"3\").asCom;\n        let action1 = cc.moveBy(1, -458 - 230, -60);\n        let action2 = cc.rotateBy(1, -10);\n        let action3 = cc.moveBy(1, 458 + 230, -60);\n        let action4 = cc.rotateBy(1, 10);\n\n        let callBack = cc.callFunc(function () {\n            self.moveAllItemBottom();\n        });\n        item1.node.runAction(cc.spawn(action1, action2));\n        item2.node.runAction(cc.spawn(action3, action4));\n    }\n    private moveAllItemBottom(): void {\n        let self = this;\n        let designSize = cc.view.getDesignResolutionSize().width;\n        let visibleSize = cc.view.getVisibleSize().width;\n        let size = 200 + (visibleSize - designSize) / 2;\n        let callBack = cc.callFunc(function () {\n            self.hide();\n        });\n        for (let index = 0; index < this._cardCount; index++) {\n            let item = this._base.getChild(index.toString()).asCom;\n            item.visible = true;\n            let action1 = cc.scaleTo(1, 0);\n            let action2 = cc.moveTo(1, size, -1000);\n            if (index == this._cardCount - 1) {\n                item.node.runAction(cc.sequence(cc.spawn(action1, action2), callBack));\n            } else {\n                item.node.runAction(cc.spawn(action1, action2));\n            }\n        }\n    }\n    private hideItem(): void {\n        for (let index = 0; index < 4; index++) {\n            let item = this._base.getChild(index.toString()).asCom;\n            item.visible = false;\n            item.node.scale = 0.8;\n            item.node.angle = 0;\n            item.node.x = this.getPosX();\n            item.node.y = this._initY;\n            item.node.stopAllActions();\n        }\n    }\n    public setData(cardData: any, callBack: Function) {\n        //this._moveClip.node.opacity = 255;\n        //console.log(this._moveClip.node.opacity);\n        this._cardCount = cardData.length;\n        if (this._cardCount <= 0) return;\n\n        this._callBack = callBack;\n        this._base.getChild(\"count\").asLabel.text = this._cardCount.toString();\n\n        let self = this;\n        this.show();\n        this.hideItem();\n        let isNew = 0;\n        for (let index = 0; index < this._cardCount; index++) {\n            let item = this._base.getChild(index.toString()).asCom;\n            item.visible = true;\n\n            item.getChild(\"icon\").asLoader.url = cardData[index].imageUrl;\n            item.getChild(\"count\").asLabel.text = cardData[index].cardCount;\n            isNew = cardData[index].isNewCard == true ? 1 : 0;\n            item.getController(\"isNew\").setSelectedIndex(isNew);\n        }\n\n        //this._moveClip.playing = true;\n        //this._moveClip.setPlaySettings(\n        //    0,\n        //    -1,\n        //    1,\n        //    -1,\n        //    function () {\n        //        self._moveClip.node.runAction(cc.fadeOut(0.2));\n        //        self._moveClip.playing = false;\n        //       self.playAction();\n        //    },\n        //    this\n        // );\n    }\n    show(): void {\n        super.show();\n    }\n    hide(): void {\n        this._callBack();\n        super.hide();\n    }\n    onPlayHideAni(): void { }\n}\n"]}