{"version":3,"sources":["assets\\Games\\texas\\script\\View\\UIMoveMono.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\nimport TimeInfoMgrTex from \"./TimeInfoMgrTex\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class UIMoveMonoFgui extends fgui.GComponent {\n    public isFade = false;\n    public delay = 0;\n    public speed = 500;\n    public fixedTime = 1;\n    public isUseSpeed = true;\n    public isEndHide = false;//结束之后是隐藏\n    public isResetPos = true;//结束之后是否还原位置\n    public ease: number;\n\n    public fromTs: fgui.GComponent = null;\n    public toTs: fgui.GComponent = null;\n    private onCmp: Function[] = null;\n\n    // Start is called before the first frame update\n    Start() {\n        //Move();旁观玩家进来如果有下注会造成筹码第一次不移动到底池bug\n    }\n\n    OnLoadCompleted() {\n        this.node.active = false;\n    }\n\n    AutoSetGoProperty() { }\n\n    public Move(toTarget: fgui.GComponent = null, onCmp: Function[] = null) {\n        this.Move2(this.delay, toTarget, onCmp);\n    }\n\n    public Move2(delay: number, toTarget: fgui.GComponent = null, onCmp: Function[] = null) {\n        if (toTarget == null) {\n            toTarget = this.toTs;\n        }\n\n        if (toTarget == null) { return; }\n        this.onCmp = onCmp;\n        this.node.stopAllActions();\n        if (delay > 0) {\n            let timeout = setTimeout(() => {\n                this.DoMove(toTarget);\n            }, delay * 1000);\n            TimeInfoMgrTex.instance.addTimerNoCallback(timeout);\n        }\n        else {\n            this.DoMove(toTarget);\n        }\n    }\n    private startPos: cc.Node;\n    private DoMove(toTarget: fgui.GComponent) {\n        if (toTarget == null) { return; }\n        // this.Show();\n        if (this.isFade) {\n            this.node.runAction(cc.fadeTo(0, 1));//gameObject.getOrAddComponent<CanvasGroup>().DOFade(1, 0);\n        }\n\n\n        this.startPos = this.fromTs != null ? this.fromTs.node : this.node;\n        this.moveN1toN2(this.node, this.startPos)\n        let time = this.fixedTime;\n        // if (this.isUseSpeed)\n        // {\n        //     let worldTo = toTarget.node.parent.convertToWorldSpaceAR(toTarget.node.position);\n        //     let worldStart = this.node.parent.convertToWorldSpaceAR(this.node.position);\n        //     let dis:cc.Vec2 = cc.v2(worldTo.x - worldStart.x, worldTo.y - worldStart.y);\n        //     if (this.speed <= 0) { this.speed = 1; }\n        //     time = dis.mag() / this.speed;\n        //     console.log(\"======MoveTime=\"+time);\n        // }\n        let sequence: any = cc.sequence(cc.moveTo(time, this.convertNodeSpaceAR(this.node, toTarget.node)), cc.callFunc(() => {\n            this.HandleMoveComplete();\n            console.log(\"移动筹码完成======pos= \" + this.node.position);\n        }))\n        this.node.runAction(sequence)\n    }\n\n    public HandleMoveComplete() {\n        if (this.isFade) {\n            let sequence: any = cc.sequence(cc.fadeTo(1, 0), cc.callFunc(() => {\n                this.HandleOnComplete();\n            }))\n            this.node.runAction(sequence)\n        }\n        else {\n            this.HandleOnComplete();\n        }\n    }\n\n\n    public HandleOnComplete() {\n        if (this.isEndHide) { this.Hide(); }\n        if (this.isResetPos) { this.moveN1toN2(this.node, this.startPos); }\n        if (this.onCmp != null) {\n            for (var i = 0; i < this.onCmp.length; i++) {\n                this.onCmp[i]();\n            }\n            this.onCmp = null;\n        }\n    }\n\n    public Stop() {\n        this.node.stopAllActions();\n    }\n\n    // 把 node1移动到 node2的位置\n    public moveN1toN2(node1: cc.Node, node2: cc.Node) {\n        node1.position = node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position))\n    }\n    // 获取把 node1移动到 node2位置后的坐标\n    public convertNodeSpaceAR(node1: cc.Node, node2: cc.Node): cc.Vec2 {\n        let v = node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position));\n        return cc.v2(v.x, v.y);\n    }\n\n    public Show() {\n        this.node.active = true;\n        this.visible = true;\n    }\n\n    public Hide() {\n        this.node.active = false;\n        this.visible = false;\n    }\n}\n\n\nexport class UIMoveMono extends ViewBase {\n    public isFade = false;\n    public delay = 0;\n    public speed = 500;\n    public fixedTime = 1;\n    public isUseSpeed = true;\n    public isEndHide = false;//结束之后是隐藏\n    public isResetPos = true;//结束之后是否还原位置\n    public ease: number;\n\n    public fromTs: fgui.GComponent = null;\n    public toTs: fgui.GComponent = null;\n    private onCmp: Function = null;\n\n    // Start is called before the first frame update\n    Start() {\n\n    }\n\n    OnLoadCompleted() {\n        this.node.active = false;\n    }\n\n    AutoSetGoProperty() { }\n\n    public Move(toTarget: fgui.GComponent = null, onCmp: Function = null) {\n        this.Move2(this.delay, toTarget, onCmp);\n    }\n\n    public Move2(delay: number, toTarget: fgui.GComponent = null, onCmp: Function = null) {\n        if (toTarget == null) {\n            toTarget = this.toTs;\n        }\n\n        if (toTarget == null) { return; }\n        this.onCmp = onCmp;\n        this.node.stopAllActions();\n        if (delay > 0) {\n            let timeout = setTimeout(() => {\n                this.DoMove(toTarget);\n            }, delay * 1000);\n            TimeInfoMgrTex.instance.addTimerNoCallback(timeout);\n        }\n        else {\n            this.DoMove(toTarget);\n        }\n    }\n    private startPos: cc.Node;\n    private DoMove(toTarget: fgui.GComponent) {\n        if (toTarget == null) { return; }\n        console.log(\"开始移动物体：\" + this.name);\n        if (this.isFade) {\n            this.node.runAction(cc.fadeTo(0, 1));//gameObject.getOrAddComponent<CanvasGroup>().DOFade(1, 0);\n        }\n\n\n        this.startPos = this.fromTs != null ? this.fromTs.node : this.node;\n        this.moveN1toN2(this.node, this.startPos)\n        let time = 2// this.fixedTime;\n        // if (this.isUseSpeed)\n        // {\n        //     let worldTo = toTarget.node.parent.convertToWorldSpaceAR(toTarget.node.position);\n        //     let worldStart = this.node.parent.convertToWorldSpaceAR(this.node.position);\n        //     let dis:cc.Vec2 = cc.v2(worldTo.x - worldStart.x, worldTo.y - worldStart.y);\n        //     if (this.speed <= 0) { this.speed = 1; }\n        //     time = dis.mag() / this.speed;\n        //     console.log(\"======MoveTime=\"+time);\n        // }\n        var self = this;\n        let sequence: any = cc.sequence(\n            cc.moveTo(time, self.convertNodeSpaceAR(self.fguiComponent.node, toTarget.node)),\n            cc.callFunc(() => {\n                self.HandleMoveComplete();\n                console.log(\"完成移动物体：\" + this.name);\n            })\n        );\n        this.node.runAction(sequence)\n    }\n\n    public HandleMoveComplete() {\n        if (this.isFade) {\n            let sequence: any = cc.sequence(cc.fadeTo(1, 0), cc.callFunc(() => {\n                this.HandleOnComplete();\n            }))\n            this.node.runAction(sequence)\n        }\n        else {\n            this.HandleOnComplete();\n        }\n    }\n\n\n    public HandleOnComplete() {\n        if (this.isEndHide) { this.Hide(); }\n        if (this.isResetPos) { this.moveN1toN2(this.node, this.startPos); }\n        if (this.onCmp != null) { this.onCmp(); this.onCmp = null; }\n    }\n\n    public Stop() {\n        this.node.stopAllActions();\n    }\n\n    // 把 node1移动到 node2的位置\n    public moveN1toN2(node1: cc.Node, node2: cc.Node) {\n        node1.position = node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position))\n    }\n    // 获取把 node1移动到 node2位置后的坐标\n    public convertNodeSpaceAR(node1: cc.Node, node2: cc.Node): cc.Vec2 {\n        let v = node1.parent.convertToNodeSpaceAR(node2.parent.convertToWorldSpaceAR(node2.position));\n        return cc.v2(v.x, v.y);\n    }\n\n    public Show() {\n        this.node.active = true;\n        super.Show();\n    }\n\n    public Hide() {\n        this.node.active = false;\n        super.Hide();\n    }\n}\n\n"]}