{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\knapsack\\MyKnapsackItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from \"../../../../Script/BaseFrame/AudioManager\";\r\nimport { UIUtil } from \"../../../../Script/Common/UIUtil\";\r\nimport { AppConst } from \"../../../../Script/modules/@slotsmaster/ui-common/lib/AppConst\";\r\nimport { PropInfo } from \"../LobbyNetData\";\r\nimport LobbyViewCtr from \"../LobbyViewCtr\";\r\n\r\n\r\nexport class MyKnapsackItem extends fgui.GComponent {\r\n    private typename: fgui.GTextField;\r\n    private btn_exchange: fgui.GButton;\r\n    private btn_use: fgui.GButton;\r\n    private bgController: fgui.Controller;\r\n    private descText: fgui.GRichTextField;\r\n    private descGroup: fgui.GGroup;\r\n    private isUse: fgui.Controller;\r\n    private PropID: number;\r\n    private imgUrl: string;\r\n    private iconLoader: fgui.GLoader;\r\n    private count: number;\r\n    /** 0:金币  1:头像框 */\r\n    private PropType: number;\r\n\r\n    protected onConstruct() {\r\n        this.typename = this.getChild(\"typename\").asTextField;\r\n        this.btn_exchange = this.getChild(\"btn_exchange\").asButton;\r\n        this.btn_use = this.getChild(\"btn_use\").asButton;\r\n        this.bgController = this.getController(\"bg\");\r\n        this.descGroup = this.getChild(\"n10\").asGroup;\r\n        this.descText = this.getChild(\"desc\").asRichTextField;\r\n        this.isUse = this.getController(\"isuse\");\r\n        this.btn_exchange.onClick(this.exchange, this);\r\n        this.btn_use.onClick(this.useProp, this);\r\n        this.iconLoader = this.getChild(\"iconLoader\").asLoader;\r\n    }\r\n    public setData(data: PropInfo) {\r\n        console.log(\"data PropInfo == \", data);\r\n        // if (data.PropName == \"\")\r\n        this.PropType = data.PropType;\r\n        this.count = data.PropCount;\r\n        this.typename.text = data.PropName + \"*\" + data.PropCount;\r\n        this.descText.text = data.Desc;\r\n        this.isUse.setSelectedIndex(data.UseType);\r\n        this.PropID = data.PropID;\r\n        UIUtil.loadShopImage(this.iconLoader, data.ImgUrl);\r\n        this.imgUrl = data.ImgUrl;\r\n        switch (data.PropID) {\r\n            case 10008:\r\n                this.bgController.setSelectedIndex(0);\r\n                break;\r\n            case 10009:\r\n                this.bgController.setSelectedIndex(2);\r\n                break;\r\n            case 10010:\r\n                this.bgController.setSelectedIndex(3);\r\n                break;\r\n            default:\r\n                this.bgController.setSelectedIndex(1);\r\n                break;\r\n        }\r\n    }\r\n\r\n    public showDesc() {\r\n        this.descGroup.visible = !this.descGroup.visible;\r\n    }\r\n    /**兑换 */\r\n    public exchange(event: fgui.Event) {\r\n        event.bubbles = false;\r\n        AudioManager.Singleton.play('MyKnapsackItem', \"button\");\r\n        if (this.PropType == 0) {\r\n            // LobbyViewCtr.instance.cs_useprop(this.PropID, this.count, true);\r\n            LobbyViewCtr.instance.cs_useprop(this.PropID, 1, true);\r\n        } else {\r\n            LobbyViewCtr.instance.cs_useprop(this.PropID, 1, true);\r\n        }\r\n    }\r\n    /**使用 */\r\n    public useProp(event: fgui.Event) {\r\n        event.bubbles = false;\r\n        AudioManager.Singleton.play('MyKnapsackItem', \"button\");\r\n        if (this.PropType == 1) {\r\n            if (AppConst.mPlayerModel[\"headIcos\"].indexOf(this.imgUrl) == -1) {\r\n                AppConst.mPlayerModel[\"headIcos\"].push(this.imgUrl);\r\n            }\r\n\r\n        }\r\n        LobbyViewCtr.instance.cs_useprop(this.PropID, 1, false);\r\n    }\r\n\r\n}"]}