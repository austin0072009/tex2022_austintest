{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\vip\\VipExchangeLogView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from \"../../../../Script/BaseFrame/AudioManager\";\r\nimport { CommonCtr } from \"../../../../Script/BaseFrame/CommonCtr\";\r\nimport ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\r\nimport HttpHelpEx from \"../../../../Script/Common/Managers/HttpHelpEx\";\r\nimport { AppConst } from \"../../../../Script/modules/@slotsmaster/ui-common/lib/AppConst\";\r\nimport { BaseFrameNative } from \"../../../../Script/BaseFrameNative\";\r\nimport NativeMethod from \"../../NativeMethod\";\r\n\r\n/**\r\n * @description vip 兑换记录\r\n * \r\n */\r\nexport default class VipExchangeLogView extends ViewBase {\r\n    protected get packageResourceName(): string {\r\n        return \"gameHall\";\r\n    }\r\n    protected get packageName(): string {\r\n        return \"res/Lobby\";\r\n    }\r\n    protected get componentName(): string {\r\n        return \"ExchangeLog\";\r\n    }\r\n\r\n    private ui_btn_exchangeBreak: fgui.GButton = null;\r\n    private ui_exLogList: fgui.GList = null;\r\n    private ui_changeLog: fgui.GLoader = null;\r\n    createChildComponents() {\r\n        super.createChildComponents();\r\n        this.fguiComponent.visible = false;\r\n        this.ui_btn_exchangeBreak.onClick(this.Hide, this);\r\n\r\n        this.ui_exLogList.setVirtual();\r\n        this.ui_exLogList.itemRenderer = this.itemRender.bind(this);\r\n\r\n        NativeMethod.setUrlByLanguage(this.ui_changeLog);\r\n    }\r\n    OnLoadCompleted() {\r\n        this.Show();\r\n    }\r\n\r\n    Hide() {\r\n        AudioManager.Singleton.play('VipExchangeLogView', \"button\");\r\n        super.Hide();\r\n    }\r\n\r\n    public itemRender(index: number, obj: fgui.GObject) {\r\n        let com = <fgui.GComponent>obj;\r\n        let name = com.getChild(\"name\").asTextField;\r\n        let order = com.getChild(\"order\").asTextField;\r\n        let time = com.getChild(\"time\").asTextField;\r\n        let souce = com.getChild(\"souce\").asTextField;\r\n        let state = com.getChild(\"state\").asTextField;\r\n\r\n        name.text = this.orderListData[index].itemName;\r\n        order.setVar(\"order\", this.orderListData[index].orderNum).flushVars();\r\n        time.setVar(\"time\", this.orderListData[index].creatDate).flushVars();\r\n        souce.setVar(\"jf\", this.orderListData[index].itemScores + '').flushVars();\r\n        state.text = this.orderListData[index].status;\r\n    }\r\n\r\n    public Show() {\r\n        super.Show();\r\n        this.getitemOrderLog();\r\n    }\r\n\r\n    /**記錄數據 */\r\n    private orderListData: { itemName: string, orderNum: string, itemScores: number, status: string, creatDate: string }[] = [];\r\n\r\n    public getitemOrderLog() {\r\n        let url = BaseFrameNative.serverlistItem.apiAdress + \"/api/Game/Getitemorderlog\" + `?userid=${AppConst.mPlayerModel.userid}`;\r\n\r\n        HttpHelpEx.instance.get(url)\r\n            .then((res) => {\r\n                cc.log(\"兑换记录----------\", res);\r\n                if (res.code == 1) {\r\n                    this.orderListData = res.data.data;\r\n                    this.ui_exLogList.numItems = this.orderListData.length;\r\n                }\r\n            })\r\n            .catch(() => {\r\n                CommonCtr.instance.ShowTipLabel(\"獲取兌換記錄失敗\");\r\n            })\r\n\r\n    }\r\n\r\n\r\n}"]}