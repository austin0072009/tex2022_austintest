{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\welfare\\WelfareView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from \"../../../../Script/BaseFrame/AudioManager\";\r\nimport ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\r\nimport { UIUtil } from \"../../../../Script/Common/UIUtil\";\r\nimport { AppConst } from \"../../../../Script/modules/@slotsmaster/ui-common/lib/AppConst\";\r\nimport SlideShow from \"../Components/SlideShow\";\r\nimport { tasklist } from \"../LobbyNetData\";\r\nimport LobbyViewCtr from \"../LobbyViewCtr\";\r\nimport WelfareQuestItem from \"./WelfareQuestItem\";\r\n\r\n/**\r\n * @description 福利\r\n */\r\nexport default class WelfareView extends ViewBase {\r\n    protected get packageResourceName(): string {\r\n        return \"gameHall\";\r\n    }\r\n    protected get packageName(): string {\r\n        return \"res/Lobby\";\r\n    }\r\n    protected get componentName(): string {\r\n        return \"welfare\";\r\n    }\r\n\r\n    private ui_btn_break: fgui.GButton = null;\r\n    private ui_welfaregold: fgui.GTextField = null;\r\n    private ui_btn_welfareaddGold: fgui.GButton = null;\r\n    private ui_welfareList: fgui.GList = null;\r\n    private typeController: fgui.Controller;\r\n    private tasklist: tasklist[] = [];\r\n\r\n    public slideShow: SlideShow;\r\n    createChildComponents() {\r\n        super.createChildComponents();\r\n        this.fguiComponent.visible = false;\r\n        this.fguiComponent.sortingOrder = 9000;\r\n        this.ui_btn_break.onClick(this.Hide, this);\r\n        this.ui_btn_welfareaddGold.onClick(this.showTopupView, this);\r\n        this.typeController = this.fguiComponent.getController(\"type\");\r\n        this.typeController.onChanged(this.conChanged, this);\r\n\r\n        this.slideShow = this.getChild(\"n14\").asCom as SlideShow;\r\n\r\n        this.ui_welfareList.setVirtual();\r\n        this.ui_welfareList.itemRenderer = this.renderListItem.bind(this);\r\n\r\n        this.ui_welfaregold.text = UIUtil.formatNumber(AppConst.mPlayerModel.gold) + '';\r\n    }\r\n    OnLoadCompleted() {\r\n        this.Show();\r\n    }\r\n    /**控制器状态改变 */\r\n    public conChanged() {\r\n        AudioManager.Singleton.play('WelfareView', \"button\");\r\n        this.handleData();\r\n    }\r\n    Hide() {\r\n        AudioManager.Singleton.play('WelfareView', \"button\");\r\n        super.Hide();\r\n    }\r\n    public renderListItem(index: number, obj: fgui.GObject) {\r\n        let item = <WelfareQuestItem>obj;\r\n        item.setData(this.tasklist[index]);\r\n    }\r\n    public handleData() {\r\n        let task = LobbyViewCtr.instance.Model.tasklist;\r\n        this.tasklist = [];\r\n        if (this.typeController.selectedIndex == 0) { //超值\r\n            for (let i = 0, len = task.length; i < len; i++) {\r\n                if (task[i].type == 2) {\r\n                    this.tasklist.push(task[i]);\r\n                }\r\n            }\r\n        } else { //新手\r\n            for (let i = 0, len = task.length; i < len; i++) {\r\n                if (task[i].type == 1) {\r\n                    this.tasklist.push(task[i]);\r\n                }\r\n            }\r\n        }\r\n        this.ui_welfareList.numItems = this.tasklist.length;\r\n    }\r\n\r\n    public Show() {\r\n        this.ui_welfaregold.text = UIUtil.formatNumber(AppConst.mPlayerModel.gold) + '';\r\n        LobbyViewCtr.instance.cs_tasklist();\r\n        super.Show();\r\n    }\r\n    public showTopupView() {\r\n        AudioManager.Singleton.play('WelfareView', \"button\");\r\n        LobbyViewCtr.instance.view.showTopup();\r\n    }\r\n\r\n}"]}