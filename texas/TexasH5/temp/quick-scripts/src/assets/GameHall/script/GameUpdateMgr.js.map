{"version":3,"sources":["assets\\GameHall\\script\\GameUpdateMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { BaseFrameNative } from \"../../Script/BaseFrameNative\";\n\nconst jsb = (<any>window).jsb;\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class GameUpdateMgr extends cc.Component {\n    private static manager: GameUpdateMgr = null;\n\n    public static get instance(): GameUpdateMgr {\n        this.manager = null;\n        if (this.manager == null) {\n            this.manager = new GameUpdateMgr();\n            this.manager.onLoad();\n        }\n        return this.manager;\n    }\n\n    private _updateName: string = \"\";\n    private _updating: boolean = false;\n    private _canRetry: boolean = false;\n    private _storagePath: string = '';\n    private _am: jsb.AssetsManager = null!;\n    private _updateListener = null;\n    private versionCompareHandle: (versionA: string, versionB: string) => number = null!;\n\n    private _isUpdate: Function = null;\n    private _progressCallBack: Function = null;\n    private _updateFail: Function = null;\n\n    private commonView: any = null;\n\n    checkCb(event: any) {\n        switch (event.getEventCode()) {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                this.showTip(\"未找到本地配置文件，热更新失败！\");\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                // this.showTip(\"下载更新配置文件失败！\");\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                console.log(\"已经更新到最新的远程版本！\");\n                // 最新 不需要更新\n                this._updating = false;\n                if (this._updateListener) {\n                    this._updateListener();\n                }\n                if (this._isUpdate) {\n                    this._isUpdate(false);\n                }\n                break;\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\n                console.log(\"this._am.getTotalBytes() == \", this._am.getTotalBytes());\n                if (this._isUpdate) { // 检测是否需要更新\n                    let isudpate: boolean = this._am.getTotalBytes() != 0; // =0 不需要更新\n                    this._isUpdate(isudpate);\n                } else {\n                    this._am.setEventCallback(null!);\n                    this._updating = false;\n                    this.hotUpdate();\n                }\n                break;\n            default:\n                return;\n        }\n    }\n\n    updateCb(event: any) {\n        var failed = false;\n        var compelete = false;\n        switch (event.getEventCode()) {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                // this.showTip('没有找到本地配置文件，跳过热更新！');\n                console.log('没有找到本地配置文件，跳过热更新！');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\n                console.log(event.getDownloadedFiles() + ' / ' + event.getTotalFiles());\n                console.log(event.getDownloadedBytes() + ' / ' + event.getTotalBytes());\n\n                let percent: number = event.getDownloadedBytes() / event.getTotalBytes();\n                if (this._progressCallBack) {\n                    this._progressCallBack(Math.floor(event.getDownloadedBytes() / 1024), Math.floor(event.getTotalBytes() / 1024));\n                } else {\n                    this.showTip('下载中: ' + Math.floor(percent * 100) + \"%\");\n                }\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                // this.showTip('无法下载manifest文件，热更新跳过！');\n                console.log('无法下载manifest文件，热更新跳过！');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                // this.showTip('已经更新到最新的版本！');\n                console.log('已经更新到最新的版本！');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\n                console.log('jsb.EventAssetsManager.UPDATE_FINISHED');\n                if (!this._progressCallBack) {\n                    this.showTip('更新完成！ ' + event.getMessage());\n                }\n                compelete = true;\n                this._am.setEventCallback(null!);\n                this._updateListener = null;\n                this._updating = false;\n                this._progressCallBack = null;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FAILED:\n                this.showTip('更新失败！！！');\n                this._updating = false;\n                this._canRetry = true;\n                failed = true;\n                // 重新下载\n                break;\n            case jsb.EventAssetsManager.ERROR_UPDATING:\n                failed = true;\n                this.showTip('更新失败！');\n                break;\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\n                failed = true;\n                this.showTip(event.getMessage());\n                break;\n            default:\n                break;\n        }\n\n        if (failed) {\n            this._am.setEventCallback(null!);\n            this._updateListener = null;\n            this._updating = false;\n            if (this._updateFail) {\n                this._updateFail();\n                this._updateFail = null;\n            }\n        }\n\n        if (compelete) {\n            let remoteVersion: string = this._am.getLocalManifest().getVersion();\n\n            var searchPaths = jsb.fileUtils.getSearchPaths();\n            var newPaths = this._am.getLocalManifest().getSearchPaths();\n            Array.prototype.unshift.apply(searchPaths, newPaths);\n            for (let index = 0; index < searchPaths.length; index++) {\n                const element = searchPaths[index];\n                this.addSearchPaths(element);\n            }\n            searchPaths = jsb.fileUtils.getSearchPaths();\n            cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));\n            console.log(`游戏更新完成！`);\n            console.log(this._updateName + \"_version === \" + remoteVersion);\n            for (let index = 0; index < searchPaths.length; index++) {\n                const element = searchPaths[index];\n                console.log(\"element searchPaths === \" + element);\n            }\n            cc.sys.localStorage.setItem(this._updateName + \"_version\", remoteVersion);\n            jsb.fileUtils.setSearchPaths(searchPaths);\n        }\n    }\n\n    // 添加搜索路径\n    public addSearchPaths(path: string) {\n        let pathList = jsb.fileUtils.getSearchPaths();\n        for (let index = 0; index < pathList.length; index++) {\n            let tempPath = pathList[index];\n            if (tempPath == path) {\n                return;\n            }\n        }\n        // 没有加到搜索路径\n        pathList.unshift(path);\n        jsb.fileUtils.setSearchPaths(pathList);\n    }\n\n    loadCustomManifest() {\n        if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {\n            let customManifestStr: string = \"\";\n            let manifestUrl = this.getGameManifest(this._updateName);\n            if (jsb.fileUtils.isFileExist(manifestUrl)) {\n                //存在版本控制文件 \n                customManifestStr = jsb.fileUtils.getStringFromFile(manifestUrl);\n            } else {\n                let url = BaseFrameNative.serverList.hotupdate_url;  //\"http://129.204.109.218:88/dlc\";\n                customManifestStr = JSON.stringify({\n                    \"packageUrl\": url,\n                    \"remoteManifestUrl\": url + \"/Games/\" + this._updateName + \"/project.manifest\",\n                    \"remoteVersionUrl\": url + \"/Games/\" + this._updateName + \"/version.manifest\",\n                    \"version\": \"1.0.0\",\n                    \"assets\": {\n                    },\n                    \"searchPaths\": []\n                });\n            }\n\n            var manifest = new jsb.Manifest(customManifestStr, this._storagePath);\n            this._am.loadLocalManifest(manifest, this._storagePath);\n        }\n    }\n\n    /**\n     * @description 获取子游戏manifest url\n     * @param gameName 子游戏名\n     * @returns manifest url\n     */\n    getGameManifest(gameName): string {\n        let manifestRoot: string = \"\";\n        manifestRoot = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : \"/\") + \"Games/\";\n        return `${manifestRoot}${gameName}/project.manifest`;\n    }\n\n    retry() {\n        if (!this._updating && this._canRetry) {\n            this._canRetry = false;\n            this.showTip(\"Retry failed Assets...\");\n            this._am.downloadFailedAssets();\n        }\n    }\n\n    /**\n     * \n     * @param name  需要更新的大厅或者游戏名字\n     * @param callback  检测到已是最新的回调\n     * @param commonview   commonview类\n     * @param isupdate  检测子游戏是否有更新\n     * @param progressCallBack   子游戏的进度回调\n     * @param updateFail   子游戏更新失败的回调\n     */\n    checkUpdate(name: string, callback: Function, commonview?: any, isupdate?: Function, progressCallBack?: Function, updateFail?: Function) {\n        console.log(\"this.name == \", name);\n        console.log(\"this._updating == \", this._updating);\n        if (this._updating) {\n            this.showTip(\"检测更新中...\");\n            return;\n        }\n        this.commonView = commonview;\n        this._updateName = name;\n        this._updateListener = callback;\n        this._isUpdate = isupdate;\n        this._progressCallBack = progressCallBack;\n        this._updateFail = updateFail;\n\n        this._updating = true;\n        this._storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + 'Games/' + name + '/');\n\n        this.loadCustomManifest();\n        if (!this._am.getLocalManifest() || !this._am.getLocalManifest().isLoaded()) {\n            this.showTip(\"加载本地配置失败...\");\n            return;\n        }\n        this._am.setEventCallback(this.checkCb.bind(this));\n        this._am.checkUpdate();\n    }\n\n    hotUpdate() {\n        if (this._am && !this._updating) {\n            this._updating = true;\n\n            this._am.setEventCallback(this.updateCb.bind(this));\n            // if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {\n            //     var url = this.manifestUrl.nativeUrl;\n            //     this._am.loadLocalManifest(url);\n            // }\n            this.loadCustomManifest();\n            this._am.update();\n        } else {\n            this.showTip(\"游戏更新中... \");\n        }\n    }\n\n    showTip(tip: string) {\n        this.commonView.ShowTip(tip);\n    }\n\n    show() {\n        // if (this.updateUI.active === false) {\n        //     this.updateUI.active = true;\n        // }\n    }\n\n    // use this for initialization\n    onLoad() {\n        if (!jsb) {\n            return;\n        }\n        this.versionCompareHandle = function (versionA: string, versionB: string) {\n            console.log(\"JS Custom Version Compare: version A is \" + versionA + ', version B is ' + versionB);\n            var vA = versionA.split('.');\n            var vB = versionB.split('.');\n            for (var i = 0; i < vA.length; ++i) {\n                var a = parseInt(vA[i]);\n                var b = parseInt(vB[i] || '0');\n                if (a === b) {\n                    continue;\n                }\n                else {\n                    return a - b;\n                }\n            }\n            if (vB.length > vA.length) {\n                return -1;\n            }\n            else {\n                return 0;\n            }\n        };\n\n        this._storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + 'HotUpdate/');\n        // Init with empty manifest url for testing custom manifest\n        this._am = new jsb.AssetsManager('', this._storagePath, this.versionCompareHandle);\n        // Setup the verification callback, but we don't have md5 check function yet, so only print some message\n        // Return true if the verification passed, otherwise return false\n        this._am.setVerifyCallback(function (path: string, asset: any) {\n            // 暂时不验证 JS校验太慢 要报错\n            // // When asset is compressed, we don't need to check its md5, because zip file have been deleted.\n            // var compressed = asset.compressed;\n            // // Retrieve the correct md5 value.\n            // var expectedMD5 = asset.md5;\n            // // asset.path is relative path and path is absolute.\n            // var relativePath = asset.path;\n            // // The size of asset file, but this value could be absent.\n            // var size = asset.size;\n            // if (compressed) {\n            // this.ShowTip(\"Verification passed : \" + relativePath);\n            //     return true;\n            // }\n            // else {\n            // this.ShowTip(\"Verification passed : \" + relativePath + ' (' + expectedMD5 + ')');\n            //     return true;\n            // }\n            return true;\n        });\n        // this.showTip('Hot update is ready, please check or directly update.');\n    }\n\n    onDestroy() {\n        if (this._updateListener) {\n            this._am.setEventCallback(null!);\n            this._updateListener = null;\n        }\n    }\n}\n"]}