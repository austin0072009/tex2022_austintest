{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\activity\\ActivityView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from '../../../../Script/BaseFrame/AudioManager';\r\nimport { CommonCtr } from '../../../../Script/BaseFrame/CommonCtr';\r\nimport { BaseFrameNative } from '../../../../Script/BaseFrameNative';\r\nimport HttpHelpEx from '../../../../Script/Common/Managers/HttpHelpEx';\r\nimport { UIUtil } from '../../../../Script/Common/UIUtil';\r\nimport { AppConst } from '../../../../Script/modules/@slotsmaster/ui-common/lib/AppConst';\r\nimport LobbyViewCtr from '../LobbyViewCtr';\r\n/**\r\n * @description 活动\r\n */\r\nexport default class ActivityView extends fgui.GComponent {\r\n    private Activitylist: fgui.GList = null;\r\n\r\n    private ACListData: any[] = [];\r\n\r\n    protected onConstruct() {\r\n        this.Activitylist = this.getChild(\"Activitylist\").asList;\r\n        this.Activitylist.itemRenderer = this.renderACList.bind(this);\r\n    }\r\n\r\n    public onClickItem(data: any) {\r\n        AudioManager.Singleton.play('ActivityView', \"button\");\r\n        LobbyViewCtr.instance.view.showactivityDetails(data);\r\n    }\r\n\r\n    public Show() {\r\n        this.visible = true;\r\n        this.getListData();\r\n    }\r\n    public Hide() {\r\n        this.visible = false;\r\n    }\r\n\r\n    private getListData() {\r\n        this.Activitylist.numItems = 0;\r\n        let url = \"http://182.61.6.67:82\" + \"/api/Game/ActivityList\";//BaseFrameNative.serverlistItem.apiAdress +\r\n        let params = {\r\n            pageindex: 0,\r\n            pagesize: 0,\r\n            userid: AppConst.mPlayerModel.userid,\r\n            datestring: \"\",\r\n        }\r\n        HttpHelpEx.instance.post(url, params,\r\n            {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json; charset=utf-8\"\r\n                }\r\n            }\r\n        ).then((res) => {\r\n            console.log(\"---ActivityList---\", res);\r\n            if (res.data != null) {\r\n                this.ACListData = res.data;\r\n                this.Activitylist.numItems = this.ACListData.length;\r\n                // acContent: \"测试1111111111\"\r\n                // acTitle: \"测试1\"\r\n                // acType: 1\r\n                // backField: \"0\"\r\n                // creatTime: \"2021-11-08T15:33:55\"\r\n                // endTime: \"2021-11-13T00:00:00\"\r\n                // gType: 0\r\n                // height: 1400\r\n                // id: 1\r\n                // isDel: false\r\n                // isEnble: true\r\n                // picUrl: null\r\n                // startTime: \"2021-11-11T00:00:00\"\r\n                // theight: 150\r\n                // title: \"测试\"\r\n                // titleContent: \"测试1\"\r\n                // titleUrl: \"/fordlc/wechat/202111081533553071.png\"\r\n                // twidth: 1000\r\n                // type: 0\r\n                // userIds: null\r\n                // webUrl: null\r\n                // width: 1000\r\n            } else {\r\n                CommonCtr.instance.view.ShowTipLabel(\"獲取活動數據失敗！\");\r\n            }\r\n        }).catch((err) => {\r\n            console.log(\"---err---\", err)\r\n            CommonCtr.instance.view.ShowTipLabel(\"獲取活動數據失敗！\");\r\n        });\r\n    }\r\n\r\n    public renderACList(index: number, item: fgui.GObject) {\r\n        let go = <fgui.GButton>item;\r\n        let itemData = this.ACListData[index];\r\n        //acType = 1:文字，2圖片\r\n        if (itemData.acType == 1) {\r\n            go.getController(\"acType\").setSelectedIndex(1);\r\n            go.getChild(\"acImg\").asLoader.url = \"http://182.61.6.67:81\" + itemData.titleUrl;\r\n            go.getChild(\"acTitle\").asTextField.text = itemData.title;\r\n            go.getChild(\"acCountent\").asTextField.text = itemData.titleContent;\r\n            go.getChild(\"acStartTime\").asTextField.text = \"開始時間：\" + itemData.startTime;\r\n            go.getChild(\"acEndTime\").asTextField.text = \"結束時間：\" + itemData.endTime;\r\n        } else if (itemData.acType == 2) {\r\n            go.getController(\"acType\").setSelectedIndex(0);\r\n            go.getChild(\"acCImg\").asLoader.url = \"http://182.61.6.67:81\" + itemData.titleUrl;\r\n        }\r\n        go.clearClick();\r\n        go.onClick(() => {\r\n            this.onClickItem(itemData);\r\n        });\r\n    }\r\n}"]}