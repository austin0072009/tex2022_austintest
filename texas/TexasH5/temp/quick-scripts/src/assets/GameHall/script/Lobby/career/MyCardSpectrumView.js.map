{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\career\\MyCardSpectrumView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\r\nimport { WebSocketManager } from \"../../../../Script/BaseFrame/WebSocketManager\";\r\nimport { UIUtil } from \"../../../../Script/Common/UIUtil\";\r\nimport LobbyViewCtr from \"../LobbyViewCtr\";\r\nimport CardInfoItem from \"./CardInfoItem\";\r\nimport { cs_geymytexascollect_tex, sc_geymytexascollect_tex, TexasCollectList, cs_texascollect_tex, sc_texascollect_tex } from \"./CareerNetDataStruct\";\r\n\r\n/*\r\n * @description 我的牌普\r\n */\r\nexport default class MyCardSpectrumView extends ViewBase {\r\n\r\n    protected get packageResourceName(): string {\r\n        return \"gameHall\";\r\n    }\r\n    protected get packageName(): string {\r\n        return \"res/Lobby\";\r\n    }\r\n    protected get componentName(): string {\r\n        return \"myCardSpectrum\";\r\n    }\r\n    private ui_btn_mycardSpBreak: fgui.GButton = null;\r\n    /**取消 */\r\n    private ui_btn_myCardQx: fgui.GButton = null;\r\n    /**删除 */\r\n    private ui_btn_myCardDelect: fgui.GButton = null;\r\n    private ui_cardItemList: fgui.GList = null;\r\n    public ui_n119: fgui.GButton = null;\r\n\r\n    private texasCollectList: TexasCollectList[] = null;\r\n\r\n    createChildComponents() {\r\n        super.createChildComponents();\r\n        this.fguiComponent.visible = false;\r\n        this.ui_btn_mycardSpBreak.onClick(this.Hide, this);\r\n        this.ui_cardItemList.on(fgui.Event.CLICK_ITEM, this.onClickItem, this);\r\n        this.ui_btn_myCardDelect.onClick(this.delectCardItem, this);\r\n        this.ui_btn_myCardQx.onClick(this.qxCardItem, this);\r\n\r\n        this.ui_cardItemList.itemRenderer = this.renderListItem.bind(this);\r\n    }\r\n    OnLoadCompleted() {\r\n        this.Show();\r\n\r\n        this.ui_n119.onClick(() => {\r\n            this.setControllerProperty(\"edit\", 1)\r\n            this.ui_n119.visible = false;\r\n            this.setCardIsEdit();\r\n        });\r\n    }\r\n\r\n    Show() {\r\n        this.allItem = [];\r\n        super.Show();\r\n        let _getlist: cs_geymytexascollect_tex = new cs_geymytexascollect_tex();\r\n        _getlist._g = 51;\r\n        _getlist.fn = \"cs_geymytexascollect_tex\";\r\n        WebSocketManager.getInstance.SendJSON(_getlist, this.sc_geymytexascollect_tex.bind(this));\r\n    }\r\n\r\n    public sc_geymytexascollect_tex(data: sc_geymytexascollect_tex) {\r\n        this.texasCollectList = data.data;\r\n        this.ui_cardItemList.numItems = this.texasCollectList.length;\r\n    }\r\n\r\n    private delItem: CardInfoItem[] = [];\r\n    private allItem: CardInfoItem[] = [];\r\n    public onClickItem(item: CardInfoItem) {\r\n        console.log(\"-------\", item);\r\n        if (item.isDelect) {\r\n            this.delItem.push(item);\r\n            return;\r\n        }\r\n        console.error(\"cid=\" + item.dataInfo.cid);\r\n        LobbyViewCtr.instance.view.showMyCardHistory(item.dataInfo.cid);\r\n    }\r\n\r\n    public delectCardItem() {\r\n        this.delItem.forEach((item) => {\r\n            this.ui_cardItemList.removeChild(item);\r\n            this.cs_texascollect_tex(item.dataInfo.infoId);\r\n        });\r\n\r\n        this.setControllerProperty(\"edit\", 0);\r\n        this.ui_n119.visible = true;\r\n        this.setCardIsEdit();\r\n    }\r\n\r\n    public qxCardItem() {\r\n        this.delItem.forEach((item) => {\r\n            item.setTypeCon(0);\r\n        });\r\n        this.delItem = [];\r\n        this.setControllerProperty(\"edit\", 0);\r\n        this.ui_n119.visible = true;\r\n        this.setCardIsEdit();\r\n    }\r\n\r\n    public setCardIsEdit() {\r\n        this.allItem.forEach((item) => {\r\n            item.setEditCon(this.getControllerProperty(\"edit\"));\r\n        });\r\n    }\r\n\r\n    public renderListItem(index: number, item: fgui.GObject) {\r\n        let card: CardInfoItem = item as CardInfoItem;\r\n        let cardata: number[] = UIUtil.Concat(this.texasCollectList[index].OwnSpair, this.texasCollectList[index].compoker);\r\n        card.setData(cardata, this.texasCollectList[index].OwnWin);\r\n        card.dataInfo = this.texasCollectList[index];\r\n        this.allItem.push(card);\r\n    }\r\n\r\n    public cs_texascollect_tex(infoId: string) {\r\n        let _getlist: cs_texascollect_tex = new cs_texascollect_tex();\r\n        _getlist._g = 51;\r\n        // _getlist.levelid = this.Model.levelid;\r\n        // _getlist.tableid = this.Model.tableid;\r\n        _getlist.type = 1;\r\n        _getlist.infoId = infoId;\r\n        _getlist.fn = \"cs_texascollect_tex\";\r\n        WebSocketManager.getInstance.SendJSON(_getlist, this.sc_texascollect_tex.bind(this));// () => { return true; });\r\n    }\r\n\r\n    public sc_texascollect_tex(data: sc_texascollect_tex) {\r\n        if (data.result == 1) {\r\n            console.log(\"删除成功！\");\r\n        }\r\n    }\r\n}"]}