{"version":3,"sources":["assets\\GameHall\\script\\Lobby\\myinfo\\MyinfoView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from \"../../../../Script/BaseFrame/AudioManager\";\r\nimport { CommonCtr } from \"../../../../Script/BaseFrame/CommonCtr\";\r\nimport ViewBase from \"../../../../Script/BaseFrame/ViewBase\";\r\nimport HttpHelpEx from \"../../../../Script/Common/Managers/HttpHelpEx\";\r\nimport { UIUtil } from \"../../../../Script/Common/UIUtil\";\r\nimport { AppConst } from \"../../../../Script/modules/@slotsmaster/ui-common/lib/AppConst\";\r\nimport { BaseFrameNative } from \"../../../../Script/BaseFrameNative\";\r\nimport LobbyViewCtr from \"../LobbyViewCtr\";\r\n\r\n/**\r\n * @description 我的個人信息\r\n */\r\nexport default class MyinfoView extends ViewBase {\r\n    protected get packageResourceName(): string {\r\n        return \"gameHall\";\r\n    }\r\n    protected get packageName(): string {\r\n        return \"res/Lobby\";\r\n    }\r\n    protected get componentName(): string {\r\n        return \"myinfo\";\r\n    }\r\n\r\n    private ui_btn_myinfoBreak: fgui.GButton = null;\r\n    private ui_tophead: fgui.GComponent = null;\r\n    private ui_nickname: fgui.GTextInput = null;\r\n    private ui_headlist: fgui.GList = null;\r\n    private sexController: fgui.Controller;\r\n    private topHeadLoader: fgui.GLoader;\r\n    private ui_topHeadFrameLoader: fgui.GLoader = null;\r\n    private ui_btn_infosave: fgui.GButton = null;\r\n\r\n    private ui_goldTip: fgui.GComponent = null;\r\n    private ui_xhgoldqr: fgui.GButton = null;\r\n    private ui_xhgoldqx: fgui.GButton = null;\r\n\r\n    private ui_nogoldTip: fgui.GComponent = null;\r\n    private ui_gotopupqr: fgui.GButton = null;\r\n    private ui_gotopupqx: fgui.GButton = null;\r\n\r\n    private typeController: fgui.Controller;\r\n    /**头像框 */\r\n    private ui_headframelist: fgui.GList = null;\r\n    /**当前选择的头像框 */\r\n    public selectHeadFrame: string;\r\n    public isChangeName: boolean = false;\r\n    private cantouch: boolean = true;\r\n    public headFrames: string[] = [];\r\n\r\n    public deleteHeadIcons: number[] = [21, 22, 23, 24, 25, 26, 27, 28];\r\n\r\n    createChildComponents() {\r\n        super.createChildComponents();\r\n        this.fguiComponent.visible = false;\r\n        this.ui_btn_myinfoBreak.onClick(this.HideView, this);\r\n        this.sexController = this.fguiComponent.getController(\"sex\");\r\n        this.ui_headlist.setVirtual();\r\n        this.ui_headlist.itemRenderer = this.renderListItem.bind(this);\r\n        this.ui_headlist.on(fgui.Event.CLICK_ITEM, this.onClickItem, this);\r\n\r\n        this.ui_tophead.onClick(this.upLoadHead, this);\r\n\r\n        this.topHeadLoader = this.ui_tophead.getChild(\"n41\").asButton.getChild(\"head\").asCom.getChild(\"n0\").asLoader;\r\n        // this.topHeadFrameLoader = this.ui_tophead.getChild(\"n41\").asButton.getChild(\"head\").asCom.getChild(\"n4\").asLoader;\r\n\r\n        this.ui_btn_infosave.onClick(this.savaInfo, this);\r\n\r\n        this.ui_xhgoldqr.onClick(this.affirmChanged, this);\r\n        this.ui_xhgoldqx.onClick(this.cancelChanged, this);\r\n        this.ui_gotopupqr.onClick(this.showTopupView, this);\r\n        this.ui_gotopupqx.onClick(this.hideNogoldTip, this);\r\n\r\n        // this.typeController = this.fguiComponent.getController(\"type\");\r\n        this.ui_headframelist.setVirtual();\r\n        this.ui_headframelist.itemRenderer = this.renderListFrameItem.bind(this);\r\n        this.ui_headframelist.on(fgui.Event.CLICK_ITEM, this.onClickFrameItem, this);\r\n    }\r\n\r\n    OnLoadCompleted() {\r\n        window.disposeImageHead = this.disposeImageHead.bind(this);\r\n        this.ui_headlist.numItems = 59;\r\n        this.Show();\r\n    }\r\n    Hide() {\r\n        super.Hide();\r\n    }\r\n\r\n    public HideView() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.Hide();\r\n    }\r\n\r\n    public getByteLength(str: string) {\r\n        let b = 0;\r\n        for (let i = 0; i < str.length; i++) {\r\n            let c = str.charAt(i);\r\n            if (/^[\\u0000-\\u00ff]$/.test(c)) {\r\n                b++;\r\n            } else { b += 2; }\r\n        }\r\n        return b;\r\n    }\r\n\r\n\r\n    /**修改信息  同一个接口  判断当前在修改哪个  1当前在修改昵称  2当前在修改头像 */\r\n    public changeSome: number = 0;\r\n    /**當前選擇的頭像 */\r\n    public selectHeadIndex: string;\r\n\r\n    public initData() {\r\n        let play = AppConst.mPlayerModel;\r\n        this.ui_nickname.text = play._n;\r\n        let sex = AppConst.mPlayerModel.wechat._S;\r\n        this.sexController.setSelectedIndex(sex);\r\n        console.log(\"play.wechat.wicon == \", play.wechat.wicon);\r\n        UIUtil.loadImage(this.topHeadLoader, play.wechat.wicon);\r\n    }\r\n\r\n    public renderListItem(index: number, obj: fgui.GObject) {\r\n        let com = <fgui.GButton>obj;\r\n        let head = com.getChild(\"head\").asCom;\r\n        let headLoader = head.getChild(\"n0\").asLoader;\r\n        // UIUtil.loadImage(headLoader, \"/fordlc/wechat/user_\" + (index + 1) + \".png\");\r\n        if (this.isDeleteHeadIcon(index + 1)) return;\r\n        let name = \"user_\" + (index + 1) + '.png';\r\n        UIUtil.loadImage(headLoader, \"user_\" + (index + 1), \"Lobby\");\r\n        com.name = name;\r\n    }\r\n\r\n    public isDeleteHeadIcon(index: number): boolean {\r\n        for (let index = 0; index < this.deleteHeadIcons.length; index++) {\r\n            let deleteNum = this.deleteHeadIcons[index];\r\n            if (deleteNum == index) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public onClickItem(item: fgui.GButton) {\r\n        // this.topHeadLoader.url = \"ui://Common/user_\" + item.name;\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.selectHeadIndex = item.name;\r\n    }\r\n\r\n    /**头像框 */\r\n    public renderListFrameItem(index: number, obj: fgui.GObject) {\r\n        let com = <fgui.GButton>obj;\r\n        let frame = com.getChild(\"n0\").asLoader;\r\n        let name = this.headFrames[index].split(\"/\")[3];\r\n        com.name = name;\r\n        UIUtil.loadShopImage(frame, this.headFrames[index]);\r\n    }\r\n    public onClickFrameItem(item: fgui.GButton) {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.selectHeadFrame = item.name;\r\n    }\r\n\r\n    /**保存信息 */\r\n    public savaInfo() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        let sendName: string;\r\n        let sendSex: number;\r\n\r\n        let editname = this.ui_nickname.text;\r\n        let sex = this.sexController.selectedIndex;\r\n        if (editname == AppConst.mPlayerModel._n) {\r\n            this.isChangeName = false;\r\n            sendName = '';\r\n        } else {\r\n            this.isChangeName = true;\r\n            sendName = editname;\r\n            if (AppConst.mPlayerModel.freecount <= 0) { //沒有免費的修改次數\r\n                this.ui_goldTip.visible = true;\r\n                return;\r\n            }\r\n        }\r\n        if (sex == AppConst.mPlayerModel.wechat._S) {\r\n            sendSex = -1;\r\n        } else {\r\n            sendSex = sex;\r\n        }\r\n        this.changeSome = 1;\r\n        this.sendChanged();\r\n    }\r\n\r\n    /**金幣不足去充值 */\r\n    public showTopupView() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        LobbyViewCtr.instance.view.showTopup();\r\n        this.ui_nogoldTip.visible = false;\r\n    }\r\n\r\n    /**不充值 */\r\n    public hideNogoldTip() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.ui_nogoldTip.visible = false;\r\n    }\r\n\r\n    /**取消修改 */\r\n    public cancelChanged() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.ui_goldTip.visible = false;\r\n    }\r\n    /**確認修改 */\r\n    public affirmChanged() {\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        this.ui_goldTip.visible = false;\r\n        if (UIUtil.formatNumber(AppConst.mPlayerModel.gold) < 100) {\r\n            this.ui_nogoldTip.visible = true;\r\n            return;\r\n        }\r\n        this.sendChanged();\r\n    }\r\n\r\n    public sendChanged() {\r\n        let sendName: string;\r\n        let sendSex: number;\r\n\r\n        let editname = this.ui_nickname.text;\r\n\r\n        if (this.getByteLength(editname) > 14) {\r\n            CommonCtr.instance.view.ShowTipLabel(\"输入的昵称太长了\");\r\n            return;\r\n        }\r\n\r\n        if (editname == AppConst.mPlayerModel._n) {\r\n            sendName = '';\r\n        } else {\r\n            sendName = editname;\r\n        }\r\n\r\n        sendSex = this.sexController.selectedIndex;\r\n        console.log(\"sendSex == \", sendSex);\r\n        if ((editname == AppConst.mPlayerModel._n) && (sendSex == AppConst.mPlayerModel.wechat._S) && !this.selectHeadIndex && !this.selectHeadFrame) {\r\n            CommonCtr.instance.view.ShowTipLabel(\"無修改\");\r\n            return;\r\n        }\r\n\r\n        let info = { UserId: null, HeadIcon: null, nikename: null, sex: null, Desc: null, HeadFrame: null };\r\n        info.UserId = AppConst.mPlayerModel.userid;\r\n        info.HeadIcon = this.selectHeadIndex;\r\n        info.nikename = sendName;\r\n        info.Desc = '';\r\n        info.sex = sendSex;\r\n        info.HeadFrame = this.selectHeadFrame;\r\n        LobbyViewCtr.instance.cs_personalinfo(info);\r\n    }\r\n\r\n    /**修改成功的返回 */\r\n    public handleChanged() {\r\n        // if (this.changeSome == 1) {//修改 昵称返回\r\n        //     // AppConst.mPlayerModel._n = this.ui_nickname.text;\r\n        //     // AppConst.mPlayerModel.wechat._S = this.sexController.selectedIndex;\r\n        //     LobbyViewCtr.instance.view.meView.initData();\r\n        //     CommonCtr.instance.view.ShowTipLabel(\"修改成功\");\r\n        // } else if (this.changeSome == 2) {\r\n        //     this.uploadHeadSuccess();\r\n        // }\r\n        if (this.isChangeName) {\r\n            AppConst.mPlayerModel.freecount = 0;\r\n        }\r\n        AppConst.mPlayerModel.wechat._S = this.sexController.selectedIndex;\r\n        AppConst.mPlayerModel._n = this.ui_nickname.text;\r\n        let headUrl: string;\r\n        if (this.selectHeadFrame) {\r\n            AppConst.mPlayerModel[\"headFrame\"] = \"/fordlc/wechat/\" + this.selectHeadFrame;\r\n            UIUtil.loadShopImage(this.ui_topHeadFrameLoader, AppConst.mPlayerModel[\"headFrame\"]);\r\n            LobbyViewCtr.instance.view.meView.setHeadFram();\r\n        }\r\n        if (this.selectHeadIndex) {\r\n            AppConst.mPlayerModel.wechat.wicon = \"/fordlc/wechat/\" + this.selectHeadIndex;\r\n            headUrl = AppConst.mPlayerModel.wechat.wicon;\r\n            UIUtil.loadImage(this.topHeadLoader, headUrl);\r\n            LobbyViewCtr.instance.view.meView.setHead(headUrl);\r\n        }\r\n        LobbyViewCtr.instance.view.meView.initData();\r\n        LobbyViewCtr.instance.cs_tasklist();\r\n    }\r\n\r\n\r\n\r\n    /**選擇自定義頭像 */\r\n    private fileInputElement;\r\n    /**上傳頭像 */\r\n    public upLoadHead() {\r\n        if (!this.cantouch) {\r\n            return;\r\n        }\r\n        this.cantouch = false;\r\n        this.scheduleOnce(() => {\r\n            this.cantouch = true;\r\n        }, 1)\r\n        AudioManager.Singleton.play('MyinfoView', \"button\");\r\n        let dict = {\r\n            needClip: 1, //1是裁剪，2是不裁剪\r\n            clipX: 200, //裁剪x尺寸\r\n            clipY: 200, //裁剪y尺寸\r\n        }\r\n        if (cc.sys.platform === cc.sys.ANDROID) { //android\r\n            let method = \"openPhoto\";\r\n            let data = JSON.stringify(dict);\r\n            let methodSignature = \"(Ljava/lang/String;)V\";\r\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/ImagePicker\", method, methodSignature, data);\r\n        } else if (cc.sys.os === cc.sys.OS_IOS) { //ios\r\n            jsb.reflection.callStaticMethod(\"ImagePickerViewController\", \"pickImage:\", JSON.stringify(dict));\r\n        } else {\r\n            if (!this.fileInputElement) {\r\n                let formEle = document.createElement(\"from\");\r\n                formEle[\"name\"] = \"fileUploadForm\";\r\n                document.getElementById(\"GameCanvas\").appendChild(formEle);\r\n                let aElement = document.createElement(\"input\");\r\n                aElement.id = \"testinputid\";\r\n                aElement.name = \"test\";\r\n                aElement.accept = \"image/*\";\r\n                aElement.type = \"file\";\r\n                aElement.style.zIndex = \"-1\";\r\n                aElement.style.position = \"absolute\";\r\n                aElement.style.top = \"0px\";\r\n                aElement.style.left = \"0px\";\r\n                aElement.style.maxHeight = \"100%\";\r\n                aElement.style.maxWidth = \"100%\";\r\n                aElement.style.border = \"0\";\r\n                aElement.style.cursor = \"pointer\";\r\n                formEle.appendChild(aElement);\r\n                this.fileInputElement = aElement;\r\n                this.fileInputElement.addEventListener(\"change\", async (type) => {\r\n                    let fileList = this.fileInputElement.files[0];\r\n                    let reader = new FileReader();\r\n                    reader.readAsDataURL(fileList);\r\n                    reader.onload = (event) => {\r\n                        let image = new Image() //新建一个img标签（还没嵌入DOM节点)\r\n                        let dataImg = event.target.result as string;\r\n                        let num = 0;\r\n                        image.src = event.target.result as string;\r\n                        image.onload = () => {\r\n                            cc.log(fileList.size)\r\n                            //由于不能将太多Base64字符给服务端发过于，咱们压缩一下\r\n                            //如果想支持更大图片，请继续加判断，增加除数\r\n                            if (fileList.size > 20000000) {\r\n                                cc.log(\"文件大小不能大于20M！\")\r\n                                // param.value = '';\r\n                                return;\r\n                            } else if (fileList.size > 20000000) {\r\n                                num = 100;\r\n                            } else if (fileList.size > 19000000) {\r\n                                num = 95;\r\n                            } else if (fileList.size > 18000000) {\r\n                                num = 90;\r\n                            } else if (fileList.size > 17000000) {\r\n                                num = 85;\r\n                            } else if (fileList.size > 16000000) {\r\n                                num = 80;\r\n                            } else if (fileList.size > 15000000) {\r\n                                num = 75;\r\n                            } else if (fileList.size > 14000000) {\r\n                                num = 70;\r\n                            } else if (fileList.size > 13000000) {\r\n                                num = 65;\r\n                            } else if (fileList.size > 12000000) {\r\n                                num = 60;\r\n                            } else if (fileList.size > 11000000) {\r\n                                num = 55;\r\n                            } else if (fileList.size > 10000000) {\r\n                                num = 50;\r\n                            } else if (fileList.size > 9000000) {\r\n                                num = 45;\r\n                            } else if (fileList.size > 8000000) {\r\n                                num = 40;\r\n                            } else if (fileList.size > 7000000) {\r\n                                num = 35;\r\n                            } else if (fileList.size > 6000000) {\r\n                                num = 30;\r\n                            } else if (fileList.size > 5000000) {\r\n                                num = 25;\r\n                            } else if (fileList.size > 4000000) {\r\n                                num = 20;\r\n                            } else if (fileList.size > 3000000) {\r\n                                num = 15;\r\n                            } else if (fileList.size > 2000000) {\r\n                                num = 10;\r\n                            } else if (fileList.size > 1000000) {\r\n                                num = 5;\r\n                            } else if (fileList.size > 500000) {\r\n                                num = 2.5;\r\n                            } else if (fileList.size > 250000) {\r\n                                num = 1.5;\r\n                            } else {\r\n                                num = 0;\r\n                            }\r\n                            let canvas = document.createElement('canvas');\r\n                            let context = canvas.getContext('2d');\r\n                            let imageWidth = image.width / num;  //压缩后图片的大小\r\n                            let imageHeight = image.height / num;\r\n                            canvas.width = imageWidth;\r\n                            canvas.height = imageHeight;\r\n                            context.drawImage(image, 0, 0, imageWidth, imageHeight);\r\n                            dataImg = canvas.toDataURL('image/png');\r\n                            let b64 = dataImg.replace('data:image/png;base64,', '');\r\n                            this.disposeImageHead(b64);\r\n                            //cc.log(dataImg);\r\n                            //此时的dataImg就是你要上传给服务器的字符\r\n                            // let imageObj = new Image();\r\n                            // imageObj.src = dataImg;\r\n                            // imageObj.onload = () => {\r\n                            //     let textureObj = new cc.Texture2D();\r\n                            //     textureObj.initWithElement(imageObj);\r\n                            //     textureObj.handleLoadedTexture();\r\n                            //     textureObj.width = 200;\r\n                            //     textureObj.height = 200;\r\n                            //     let spriteFrame = new cc.SpriteFrame(textureObj);\r\n                            //     this.headLoader.texture = spriteFrame;\r\n                            // }\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            this.fileInputElement.click();\r\n        }\r\n    }\r\n    private tempHeadPath: string;\r\n    /**手機上次頭像的調用 */\r\n    public disposeImageHead(base64: string) {\r\n        let self = this;\r\n        console.log(\"--- base64---\", base64);\r\n        let url = BaseFrameNative.serverlistItem.apiAdress + \"/api/Game/UploadHead\";\r\n\r\n        let params = {\r\n            filebate: base64,\r\n            tablenum: 0,\r\n            Account: 0,\r\n            gid: 0\r\n        }\r\n        HttpHelpEx.instance.post(url, params).then((res) => {\r\n            // console.log(\"---api/game/UploadHead res---\", res);\r\n            console.log(\"---api/game/UploadHead res---\", JSON.stringify(res));\r\n            if (res.code == 1) {\r\n                this.changeSome = 2;\r\n                let headName = res.data;\r\n                this.selectHeadIndex = headName;\r\n\r\n                // let imageObj = new Image();\r\n                // imageObj.src = base64;\r\n                // imageObj.onload = () => {\r\n                //     let textureObj = new cc.Texture2D();\r\n                //     textureObj.initWithElement(imageObj);\r\n                //     textureObj.handleLoadedTexture();\r\n                //     textureObj.width = 200;\r\n                //     textureObj.height = 200;\r\n                //     let spriteFrame = new cc.SpriteFrame(textureObj);\r\n                //     this.topHeadLoader.texture = spriteFrame;\r\n                // }\r\n                this.sendChanged();\r\n                // let info = { UserId: null, HeadIcon: null, nikename: null, sex: null, Desc: null };\r\n                // info.UserId = AppConst.mPlayerModel.userid;\r\n                // info.HeadIcon = headName;\r\n                // info.nikename = AppConst.mPlayerModel.wechat.wName;\r\n                // info.Desc = AppConst.mPlayerModel.wechat.Desc;\r\n                // info.sex = AppConst.mPlayerModel.wechat._S;\r\n                // LobbyViewCtr.instance.cs_personalinfo(info);\r\n            } else {\r\n                CommonCtr.instance.view.ShowTipLabel(\"上传失败\");\r\n            }\r\n        }).catch((err) => {\r\n            console.log(\"----err----\", err)\r\n            CommonCtr.instance.view.ShowTipLabel(\"选择头像错误\");\r\n        })\r\n    }\r\n\r\n    public uploadHeadSuccess() {\r\n        // cc.sys.localStorage.removeItem(\"saveHead\");\r\n        let headUrl: string = AppConst.mPlayerModel.wechat.wicon;\r\n        CommonCtr.instance.view.ShowTipLabel(\"上传成功\");\r\n        UIUtil.loadImage(this.topHeadLoader, headUrl);\r\n        LobbyViewCtr.instance.view.meView.setHead(headUrl);\r\n    }\r\n\r\n    public uint8arrayToBase64(u8Arr: Uint8Array) {\r\n        let CHUNK_SIZE = 0x8000; //arbitrary number\r\n        let index = 0;\r\n        let length = u8Arr.length;\r\n        let result = '';\r\n        let slice;\r\n        while (index < length) {\r\n            slice = u8Arr.subarray(index, Math.min(index + CHUNK_SIZE, length));\r\n            result += String.fromCharCode.apply(null, slice);\r\n            index += CHUNK_SIZE;\r\n        }\r\n        // web image base64图片格式: \"data:image/png;base64,\" + b64encoded;\r\n        // return  \"data:image/png;base64,\" + btoa(result);\r\n        return btoa(result);\r\n    }\r\n\r\n    public setHeadFram() {\r\n        if (AppConst.mPlayerModel[\"headFrame\"]) {\r\n            UIUtil.loadShopImage(this.ui_topHeadFrameLoader, AppConst.mPlayerModel[\"headFrame\"]);\r\n        }\r\n    }\r\n\r\n\r\n    public Show() {\r\n        this.cantouch = true;\r\n        this.ui_headlist.selectNone();\r\n        this.ui_headframelist.selectNone();\r\n        this.selectHeadIndex = '';\r\n        this.selectHeadFrame = '';\r\n        if (this.headFrames.length != AppConst.mPlayerModel[\"headIcos\"].length) {\r\n            this.headFrames = AppConst.mPlayerModel[\"headIcos\"];\r\n            this.ui_headframelist.numItems = this.headFrames.length;\r\n        }\r\n        this.initData();\r\n        this.setHeadFram();\r\n        super.Show();\r\n    }\r\n\r\n\r\n}"]}