{"version":3,"sources":["assets\\Games\\texas\\script\\View\\TexasTable.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { OtherUserInfoSD } from \"../../../../Script/BaseFrame/cs_base\";\nimport F_TexasViewCtr from \"../Contrl/F_TexasViewCtr\";\nimport { PokerTexasType } from \"../Model/Texas\";\nimport { TexasLanguage } from \"../Model/TexasLanguage\";\nimport TexasUserComp from \"./TexasUserComp\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class TexasTable extends cc.Component {\n    public userList: TexasUserComp[] = [];\n    /// <summary>\n    ///是本地位置\n    /// </summary>\n    public _DicPos2User: Map<number, TexasUserComp> = new Map<number, TexasUserComp>();\n    public get myUser(): TexasUserComp {\n        let localpos: number = F_TexasViewCtr.instance.Model._posServer;\n        if (this._DicPos2User.has(localpos)) {\n            return this._DicPos2User.get(localpos);\n        }\n        else {\n\n            console.log(\"localPos:\" + localpos);\n            this._DicPos2User.forEach((item, key) => {\n                console.log(\"posKey:\" + key)\n            })\n            return null;\n        }\n    }\n    /// <summary>\n    /// 观众时用这个对象 坐下后根据Pos从_DicPos2User取\n    /// </summary>\n    // public myManage:TexasUserComp;//为空表示我没有入座,表示观看模式\n    public Init() {\n        this.userList.forEach(_tuser => {\n            this._DicPos2User.set(_tuser.localpos, _tuser);\n        });\n        // this.myManage = null;// _DicPos2User[1];\n    }\n    public ForeashAllDo(match: Function) {\n        if (this._DicPos2User == null) return;\n        if (match == null) return;\n        this._DicPos2User.forEach((value, key) => {\n            match(key);\n        });\n    }\n\n    public GetBankerUserComp(): TexasUserComp {\n        let user = null\n        this.userList.forEach(userCom => {\n            if (userCom.serverpos == F_TexasViewCtr.instance.Model.BankerPos) user = userCom;\n        });\n        return null;\n    }\n\n\n    public Clear() {\n        this.userList = [];\n        this._DicPos2User = new Map<number, TexasUserComp>();\n    }\n\n\n    /// <summary>\n    /// 升庄牛牛的发牌位置确定     从庄家的位置开始算\n    /// </summary>\n    /// <param name=\"strdic\"></param>\n    /// <returns></returns>\n    public GetFirstPosFaPai(Dice1: number, Dice2: number): number {\n        return F_TexasViewCtr.instance.Model.BankerPos;\n    }\n    public GetUserByLocalPos(localpos: number): TexasUserComp {\n        let _tempuser: TexasUserComp = null;\n        this.ForeashAllDo((i) => {\n            if (this._DicPos2User.get(i).localpos == localpos) _tempuser = this._DicPos2User.get(i);\n        });\n        if (_tempuser == null) console.log(localpos + \":localpos, fetel error!\");\n        return _tempuser;\n    }\n\n    public GetUserByUserId(userId: number): TexasUserComp {\n        let tuc: TexasUserComp = null;\n        this.userList.forEach(user => {\n            if (user.player != null && user.player.userid == userId) {\n                tuc = user;\n            }\n        });\n\n        if (tuc != null) return tuc;\n\n        let sd: OtherUserInfoSD = F_TexasViewCtr.instance.Model.GetUserInfo(userId);\n        if (sd != null) {\n            tuc = this.GetUserByPos(sd.pos);\n        }\n        else {\n            //Debug.LogError(\"玩家不存在\");\n        }\n\n        return tuc;\n    }\n\n    public GetUserByPos(pos: number): TexasUserComp {\n        let user: TexasUserComp = null;\n        this.userList.forEach(userCom => {\n            if (userCom.localpos == pos) user = userCom;\n        });\n\n        return user;\n    }\n    public GetLocalPos(pos: number): number {\n        let mypos: number = F_TexasViewCtr.instance.Model._posServer;\n        return TexasTable.GetLocalPosByServerPos(pos, mypos, F_TexasViewCtr.instance.Model.manNum);\n    }\n    public static GetLocalPosByServerPos(serverPos: number, myServerPos: number, PLAYERS_NUM: number): number {\n        var side = -1;\n        let offset: number = (0 < myServerPos && myServerPos <= PLAYERS_NUM) ? 1 - myServerPos : 0;\n\n        side = ((serverPos + offset) > 0 ? (serverPos + offset) : (serverPos + offset + PLAYERS_NUM));\n        return side;//返回该位置 我们从1号位开始\n    }\n\n    public static GetNameByType(type: PokerTexasType): string {\n        let typeName = \"\";\n        switch (type) {\n            case PokerTexasType.Five_Single:\n                typeName = TexasLanguage.getLanguageById(1324);//高牌\n                break;\n            case PokerTexasType.Five_ONE_PAIR:\n                typeName = TexasLanguage.getLanguageById(1323);//一对\n                break;\n            case PokerTexasType.Five_TWO_PAIR:\n                typeName = TexasLanguage.getLanguageById(1322);//两对\n                break;\n            case PokerTexasType.Five_THREE:\n                typeName = TexasLanguage.getLanguageById(1321);//三条\n                break;\n            case PokerTexasType.Five_Straight:\n                typeName = TexasLanguage.getLanguageById(1320);//顺子\n                break;\n            case PokerTexasType.Five_Flush:\n                typeName = TexasLanguage.getLanguageById(1319);//同花\n                break;\n            case PokerTexasType.Five_THREE_TWO:\n                typeName = TexasLanguage.getLanguageById(1318);//葫芦\n                break;\n            case PokerTexasType.Five_Bomb:\n                typeName = TexasLanguage.getLanguageById(1317);//四条\n                break;\n            case PokerTexasType.Five_Flush_Straight:\n                typeName = TexasLanguage.getLanguageById(1316);//同花顺\n                break;\n            case PokerTexasType.Five_Flush_RoyalStraight:\n                typeName = TexasLanguage.getLanguageById(1315);//皇家同花顺\n                break;\n            case PokerTexasType.Error:\n                typeName = \"\";\n                break;\n        }\n        return typeName;\n    }\n}\n\n\n"]}