{"version":3,"sources":["assets\\Script\\BaseFrame\\CommonView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import LobbyViewCtr from \"../../GameHall/script/Lobby/LobbyViewCtr\";\nimport { BaseFrameNative } from \"../../Script/BaseFrameNative\";\nimport { NotificationCenter } from \"../Common/Managers/NotificationCenter\";\nimport NotificationName from \"../Common/Managers/NotificationName\";\nimport { CommonCtr } from \"./CommonCtr\";\nimport { ReconnectManager } from \"./ReconnectManager\";\nimport { SceneManager } from \"./SceneManager\";\nimport ViewBase from \"./ViewBase\";\nimport { WebSocketManager } from \"./WebSocketManager\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class CommonView extends ViewBase {\n    protected get packageResourceName(): string {\n        return \"GameCommon\";\n    }\n    protected get packageName(): string {\n        return \"Common\";\n    }\n    protected get componentName(): string {\n        return \"TipView\";\n    }\n\n    createChildComponents() {\n        super.createChildComponents();\n        fgui.GRoot.inst.addChild(this.fguiComponent);\n        this.fguiComponent.sortingOrder = 10000;\n        CommonCtr.instance.view = this;\n        this.fguiComponent.visible = false;\n        this.moveAnimation = this.fguiComponent.getTransition(\"t1\");\n        WebSocketManager.getInstance.webSocket.setHeartBeatCallback(this.backLogin.bind(this));\n        WebSocketManager.getInstance.webSocket.setTopAccountCallback(this.topAccountTip.bind(this));\n        NotificationCenter.Instance.on(NotificationName.NetWork_Event.SOCKET_CONNECT_SUC_EVENT, this.reconnectGameCallBack.bind(this));\n    }\n\n    public ui_message: fgui.GTextField = null;\n    public ui_message2: fgui.GTextField = null;\n    public ui_btnOK: fgui.GButton = null;\n    public ui_btnOKClick: fgui.GButton = null;\n    public ui_btnClose: fgui.GButton = null;\n\n    private _funOK: Function = null;\n    private _funClose: Function = null;\n\n    private ui_loading: fgui.GImage = null;\n\n    OnLoadCompleted() {\n        let scaleX = cc.winSize.width / this.fguiComponent.node.width;\n        this.fguiComponent.node.setScale(scaleX, 1);\n    }\n\n    onDestroy() {\n        super.onDestroy();\n        this.moveAnimation.dispose();\n        CommonCtr.instance.view = null;\n        NotificationCenter.Instance.off(NotificationName.NetWork_Event.SOCKET_CONNECT_SUC_EVENT);\n    }\n\n    public ShowTipLabel(mes: string) {\n        // this.messages.push(mes);\n        // if (!this.isOpend) {\n        //     this.tipMessage();\n        // }\n        console.log(\"---ShowTipLabel---\", mes);\n        this.setControllerProperty(\"type\", 1);\n        this.Show();\n\n        this.ui_message2.visible = false;\n        // 这里只能复制node 复制ui_message2在浏览器没问题 在真机模拟器上设置位置无效\n        // 这里复制完node 用的是cocos的语法\n        let node: cc.Node = cc.instantiate(this.ui_message2.node);\n        node.parent = this.ui_message2.node.parent;\n        node.position = this.ui_message2.node.position;\n        node.getComponent(cc.Label).string = mes;\n        node.active = true;\n        cc.tween(node)\n            .parallel(\n                cc.tween().by(1.5, { position: cc.v3(0, 400, 0) }),\n                cc.tween().to(1.5, { opacity: 128 })\n            )\n            .call(() => {\n                node.removeFromParent(true);\n            })\n            .start()\n    }\n\n    private messages: string[] = [];\n    private isOpend: boolean = false;\n    private moveAnimation: fgui.Transition;\n    private tipMessage() {\n        let mess = this.messages.shift();\n        if (!mess) {\n            this.isOpend = false;\n            this.Hide();\n            return;\n        }\n        this.setControllerProperty(\"type\", 1);\n        this.Show();\n        this.isOpend = true;\n        this.ui_message2.text = mess;\n        this.moveAnimation.play(() => {\n            this.ui_message2.text = '';\n            this.tipMessage();\n        }, 1)\n    }\n\n    public ShowTip(mes: string, funok?: Function, funclose?: Function) {\n        this.ui_btnOK.clearClick();\n        this.ui_btnOKClick.clearClick();\n        this.ui_btnClose.clearClick();\n\n        this.setControllerProperty(\"type\", 0)\n        this.ui_message.text = mes;\n        this._funOK = funok;\n        this._funClose = funclose;\n\n        if (this._funOK) {\n            this.ui_btnOKClick.onClick(() => {\n                this.Hide();\n                this._funOK();\n            });\n\n            this.ui_btnOK.onClick(() => {\n                this.Hide();\n                this._funOK();\n            });\n        } else {\n            this.ui_btnOK.onClick(() => {\n                this.Hide();\n            });\n        }\n\n        if (this._funClose) {\n            this.ui_btnClose.onClick(() => {\n                this.Hide();\n                this._funClose();\n            });\n\n            this.ui_btnOK.visible = false;\n            this.ui_btnOKClick.visible = true;\n            this.ui_btnClose.visible = true;\n        } else {\n            this.ui_btnOK.visible = true;\n            this.ui_btnOKClick.visible = false;\n            this.ui_btnClose.visible = false;\n        }\n        this.Show();\n    }\n\n    // 显示菊花loading\n    public showLoading() {\n        this.setControllerProperty(\"type\", 2);\n        cc.tween(this.ui_loading.node)\n            .by(1, { angle: -360 })\n            .repeatForever()\n            .start()\n        this.Show();\n    }\n\n    public hideLoading() {\n        this.Hide();\n    }\n\n    Hide() {\n        this.ui_btnOK.clearClick();\n        this.ui_btnOKClick.clearClick();\n        this.ui_btnClose.clearClick();\n        super.Hide();\n    }\n\n    //断线超时，返回登录页\n    public backLogin(tipString: string = \"与服务器断开连接，请重新登录！\") {\n        this.setControllerProperty(\"type\", 0)\n        if (BaseFrameNative.isInHall) {\n            tipString = \"与服务器断开连接，请重新连接！\";\n            // LobbyViewCtr.instance.view.gameEventShow();\n            // return;\n        }\n        this.ui_btnOK.onClick(() => {\n            this.Hide();\n            if (BaseFrameNative.isInHall) {\n                this.gameEventShow();\n            } else {\n                // SceneManager.Singleton.loadScene(\"gameHall\", \"login\");\n                tipString = \"与服务器断开连接，请重新连接！\";\n                if (BaseFrameNative.nowGameView) {\n                    BaseFrameNative.nowGameView.sendReconnect();\n                }\n            }\n        });\n        this.ui_message.text = tipString;\n\n        this.ui_btnOK.visible = true;\n        this.ui_btnOKClick.visible = false;\n        this.ui_btnClose.visible = false;\n        this.Show();\n    }\n\n    public topAccountTip(tipString: string) {\n        this.setControllerProperty(\"type\", 0)\n        this.ui_btnOK.onClick(() => {\n            this.Hide();\n            SceneManager.Singleton.loadScene(\"gameHall\", \"login\");\n        });\n        this.ui_message.text = tipString;\n\n        this.ui_btnOK.visible = true;\n        this.ui_btnOKClick.visible = false;\n        this.ui_btnClose.visible = false;\n        this.Show();\n    }\n\n    public gameEventShow() {\n        ReconnectManager.getInstance.reconnect(this.connectSuccess.bind(this), this.connectFail.bind(this), false);\n    }\n\n    public connectSuccess() {\n        console.log(\"--- connectSuccess ---\");\n    }\n\n    public connectFail() {\n        this.backLogin();\n    }\n\n    public gameEventHide() {\n        console.log(\"--- gameEventHide ---\");\n        cc.game.pause();\n    }\n\n    // 游戏有更新\n    public subGamesHaveUpdate(tipStr: string, callback: Function) {\n        this.ShowTip(tipStr, () => {\n            callback();\n        });\n        // callback();\n    }\n\n    public ShowTipTest(mes: string, funok?: Function, funclose?: Function) {\n        this.setControllerProperty(\"type\", 0)\n        this.ui_message.text = mes;\n        this._funOK = funok;\n        this._funClose = funclose;\n\n        this.ui_btnOK.visible = false;\n        this.ui_btnOKClick.visible = false;\n        this.ui_btnClose.visible = false;\n        this.Show();\n    }\n\n    // 显示下载百分比\n    public showDownloadPercent(per: string) {\n        this.ShowTip(per, () => {\n            this.Hide();\n        });\n    }\n\n    // 显示下载百分比\n    public showDownloadCompelete(tipString: string) {\n        this.ShowTip(tipString, () => {\n            this.Hide();\n        });\n    }\n\n    public reconnectGameCallBack() {\n        console.log(\"---reconnectGameCallBack---\");\n        SceneManager.Singleton.loadScene(\"gameHall\", \"login\");\n    }\n}"]}