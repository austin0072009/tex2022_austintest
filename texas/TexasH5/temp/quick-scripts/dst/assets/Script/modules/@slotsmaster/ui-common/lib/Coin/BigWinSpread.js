
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/modules/@slotsmaster/ui-common/lib/Coin/BigWinSpread.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7aa1dSofglA0oMucxdmcdQY', 'BigWinSpread');
// Script/modules/@slotsmaster/ui-common/lib/Coin/BigWinSpread.ts

"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.BigWinSpread = void 0;
var FguiComponentBase_1 = require("../../../../@mogafa/fairygui-component/lib/FguiComponentBase");
var BigWinSpread = /** @class */ (function (_super) {
    __extends(BigWinSpread, _super);
    function BigWinSpread() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(BigWinSpread.prototype, "packageResourceName", {
        get: function () {
            return "GameCommon";
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BigWinSpread.prototype, "packageName", {
        get: function () {
            return "Common";
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(BigWinSpread.prototype, "componentName", {
        get: function () {
            return "BigWinCoin";
        },
        enumerable: false,
        configurable: true
    });
    BigWinSpread.prototype.createChildComponents = function () {
        _super.prototype.createChildComponents.call(this);
        this._windowWidth = fairygui.GRoot.inst.width;
        this._windowHeight = fairygui.GRoot.inst.height;
        this._coin = this.fguiComponent.node;
        this._coin.anchorX = 0.5;
        this._coin.anchorY = 0.5;
        this._coin.x = fairygui.GRoot.inst.width / 2;
        this._coin.y = -fairygui.GRoot.inst.height / 2;
        this._coin.scale = Math.random() + 0.4;
        this._coin.angle = Math.random() * 360;
        this._radius = this._windowWidth / 4;
        console.log("BigWinCoin  createChildComponents");
        this._startPosition = cc.v2(this._coin.x, this._coin.y);
        this._bezierTime = 2;
    };
    BigWinSpread.prototype.allChildCreated = function () {
        _super.prototype.allChildCreated.call(this);
    };
    BigWinSpread.prototype.coinFlyByCurve = function (startPos, endPos, angle) {
        var _this = this;
        if (angle === void 0) { angle = 30; }
        this._coin.position = cc.v3(startPos.x, startPos.y, 0);
        this._coin.scale = 0.4;
        this._coin.angle = 360 * Math.random();
        var radius = ((Math.abs(endPos.y) / Math.cos((Math.PI * 2) / 360)) * angle) / 2;
        var trangleLen = radius * Math.sin((Math.PI * 2) / 360) * angle;
        var peak1 = cc.v2(startPos.x + trangleLen, startPos.y - startPos.y / 2);
        var trough1 = cc.v2(startPos.x - trangleLen * 2, startPos.y - startPos.y / 2);
        var peak2 = cc.v2(endPos.x - trangleLen * 2, endPos.y + startPos.y / 2);
        var bezierCurve = [peak1, peak2, endPos];
        this._coin.runAction(cc
            .sequence(cc.bezierTo(0.5, bezierCurve), cc.callFunc(function () {
            if (_this._coin.isValid) {
                _this._coin.destroy();
            }
        }))
            .easing(cc.easeInOut(1.2)));
    };
    BigWinSpread.prototype.degree30CoinsLeft = function () {
        var nodeLeftX = this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (60 + Math.random() * 10));
        var nodeLeftPosition = cc.v2(nodeLeftX, nodeY);
        var endLeftX = 300 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endLeftX, endY);
        this.bezierArr = [this._startPosition, nodeLeftPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.degree30CoinsRight = function () {
        var nodeRightX = this._windowWidth / 2 + this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (60 + Math.random() * 10));
        var nodeRightPosition = cc.v2(nodeRightX, nodeY);
        var endRightX = this._windowWidth + 100 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endRightX, endY);
        this.bezierArr = [this._startPosition, nodeRightPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.degree50CoinsLeft = function () {
        var nodeLeftX = this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (50 + Math.random() * 10));
        var nodeLeftPosition = cc.v2(nodeLeftX, nodeY);
        var endLeftX = 300 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endLeftX, endY);
        this.bezierArr = [this._startPosition, nodeLeftPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.degree50CoinsRight = function () {
        var nodeRightX = this._windowWidth / 2 + this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (50 + Math.random() * 10));
        var nodeRightPosition = cc.v2(nodeRightX, nodeY);
        var endRightX = this._windowWidth + 100 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endRightX, endY);
        this.bezierArr = [this._startPosition, nodeRightPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.degree70CoinsLeft = function () {
        var nodeLeftX = this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (60 + Math.random() * 5));
        var nodeLeftPosition = cc.v2(nodeLeftX, nodeY);
        var endLeftX = this._coin.x - 600 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endLeftX, endY);
        this.bezierArr = [this._startPosition, nodeLeftPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.degree70CoinsRight = function () {
        var nodeRightX = this._windowWidth / 2 + this._radius;
        var nodeY = this._radius * Math.tan(((Math.PI * 2) / 360) * (60 + Math.random() * 5));
        var nodeRightPosition = cc.v2(nodeRightX, nodeY);
        var endRightX = this._coin.x + 600 * Math.random();
        var endY = -fairygui.GRoot.inst.height;
        var endPosition = cc.v2(endRightX, endY);
        this.bezierArr = [this._startPosition, nodeRightPosition, endPosition];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.verticalCoinsLeft = function () {
        var nodeLeftX = this._windowWidth / 2 - (80 + Math.random() * 100);
        var nodeLeftPosition = cc.v2(nodeLeftX, this._windowHeight + (50 + Math.random() * 100));
        var endLeftX = this._windowWidth / 2 - (80 + Math.random() * 100);
        var endY = -fairygui.GRoot.inst.height;
        this.bezierArr = [this._startPosition, nodeLeftPosition, cc.v2(endLeftX, endY)];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.verticalCoinsRight = function () {
        var nodeRightX = this._windowWidth / 2 + (80 + Math.random() * 100);
        var nodeRightPosition = cc.v2(nodeRightX, this._windowHeight + (50 + Math.random() * 100));
        var endRightX = this._windowWidth / 2 + (80 + Math.random() * 100);
        var endY = -fairygui.GRoot.inst.height;
        this.bezierArr = [this._startPosition, nodeRightPosition, cc.v2(endRightX, endY)];
        this.bezier(this._bezierTime, this.bezierArr);
    };
    BigWinSpread.prototype.bezier = function (time, bezierArr) {
        var _this = this;
        this.fguiComponent.node.runAction(cc.sequence(cc.bezierTo(time, bezierArr), cc.callFunc(function () {
            if (_this.fguiComponent.node.isValid) {
                _this.fguiComponent.node.destroy();
            }
        })));
    };
    return BigWinSpread;
}(FguiComponentBase_1.default));
exports.BigWinSpread = BigWinSpread;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxtb2R1bGVzXFxAc2xvdHNtYXN0ZXJcXHVpLWNvbW1vblxcbGliXFxDb2luXFxCaWdXaW5TcHJlYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLGtHQUE2RjtBQUc3RjtJQUFrQyxnQ0FBaUI7SUFBbkQ7O0lBd0pBLENBQUM7SUF2Skcsc0JBQWMsNkNBQW1CO2FBQWpDO1lBQ0ksT0FBTyxZQUFZLENBQUM7UUFDeEIsQ0FBQzs7O09BQUE7SUFDRCxzQkFBYyxxQ0FBVzthQUF6QjtZQUNJLE9BQU8sUUFBUSxDQUFDO1FBQ3BCLENBQUM7OztPQUFBO0lBQ0Qsc0JBQWMsdUNBQWE7YUFBM0I7WUFDSSxPQUFPLFlBQVksQ0FBQztRQUN4QixDQUFDOzs7T0FBQTtJQU1TLDRDQUFxQixHQUEvQjtRQUNJLGlCQUFNLHFCQUFxQixXQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDOUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDaEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztRQUNyQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQy9D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QWQsVUFBZSxJQUFZLEVBQUUsU0FBb0I7UUFBakQsaUJBV0M7UUFWRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQzdCLEVBQUUsQ0FBQyxRQUFRLENBQ1AsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLEVBQzVCLEVBQUUsQ0FBQyxRQUFRLENBQUM7WUFDUixJQUFJLEtBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDakMsS0FBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDckM7UUFDTCxDQUFDLENBQUMsQ0FDTCxDQUNKLENBQUM7SUFDTixDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQXhKQSxBQXdKQyxDQXhKaUMsMkJBQWlCLEdBd0psRDtBQXhKWSxvQ0FBWSIsImZpbGUiOiIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEZndWlDb21wb25lbnRCYXNlIGZyb20gXCIuLi8uLi8uLi8uLi9AbW9nYWZhL2ZhaXJ5Z3VpLWNvbXBvbmVudC9saWIvRmd1aUNvbXBvbmVudEJhc2VcIjtcblxuXG5leHBvcnQgY2xhc3MgQmlnV2luU3ByZWFkIGV4dGVuZHMgRmd1aUNvbXBvbmVudEJhc2Uge1xuICAgIHByb3RlY3RlZCBnZXQgcGFja2FnZVJlc291cmNlTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJHYW1lQ29tbW9uXCI7XG4gICAgfVxuICAgIHByb3RlY3RlZCBnZXQgcGFja2FnZU5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiQ29tbW9uXCI7XG4gICAgfVxuICAgIHByb3RlY3RlZCBnZXQgY29tcG9uZW50TmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJCaWdXaW5Db2luXCI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29pbjogY2MuTm9kZTtcbiAgICBwcml2YXRlIF93aW5kb3dXaWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3dpbmRvd0hlaWdodDogbnVtYmVyO1xuXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUNoaWxkQ29tcG9uZW50cygpIHtcbiAgICAgICAgc3VwZXIuY3JlYXRlQ2hpbGRDb21wb25lbnRzKCk7XG4gICAgICAgIHRoaXMuX3dpbmRvd1dpZHRoID0gZmFpcnlndWkuR1Jvb3QuaW5zdC53aWR0aDtcbiAgICAgICAgdGhpcy5fd2luZG93SGVpZ2h0ID0gZmFpcnlndWkuR1Jvb3QuaW5zdC5oZWlnaHQ7XG4gICAgICAgIHRoaXMuX2NvaW4gPSB0aGlzLmZndWlDb21wb25lbnQubm9kZTtcbiAgICAgICAgdGhpcy5fY29pbi5hbmNob3JYID0gMC41O1xuICAgICAgICB0aGlzLl9jb2luLmFuY2hvclkgPSAwLjU7XG4gICAgICAgIHRoaXMuX2NvaW4ueCA9IGZhaXJ5Z3VpLkdSb290Lmluc3Qud2lkdGggLyAyO1xuICAgICAgICB0aGlzLl9jb2luLnkgPSAtZmFpcnlndWkuR1Jvb3QuaW5zdC5oZWlnaHQgLyAyO1xuICAgICAgICB0aGlzLl9jb2luLnNjYWxlID0gTWF0aC5yYW5kb20oKSArIDAuNDtcbiAgICAgICAgdGhpcy5fY29pbi5hbmdsZSA9IE1hdGgucmFuZG9tKCkgKiAzNjA7XG4gICAgICAgIHRoaXMuX3JhZGl1cyA9IHRoaXMuX3dpbmRvd1dpZHRoIC8gNDtcbiAgICAgICAgY29uc29sZS5sb2coXCJCaWdXaW5Db2luICBjcmVhdGVDaGlsZENvbXBvbmVudHNcIilcbiAgICAgICAgdGhpcy5fc3RhcnRQb3NpdGlvbiA9IGNjLnYyKHRoaXMuX2NvaW4ueCwgdGhpcy5fY29pbi55KTtcbiAgICAgICAgdGhpcy5fYmV6aWVyVGltZSA9IDI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFsbENoaWxkQ3JlYXRlZCgpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuYWxsQ2hpbGRDcmVhdGVkKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmFkaXVzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc3RhcnRQb3NpdGlvbjogY2MuVmVjMjtcbiAgICBwcml2YXRlIF9iZXppZXJUaW1lOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBiZXppZXJBcnI6IGNjLlZlYzJbXTtcbiAgICBwdWJsaWMgY29pbkZseUJ5Q3VydmUoc3RhcnRQb3M6IGNjLlZlYzIsIGVuZFBvczogY2MuVmVjMiwgYW5nbGU6IG51bWJlciA9IDMwKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NvaW4ucG9zaXRpb24gPSBjYy52MyhzdGFydFBvcy54LCBzdGFydFBvcy55LCAwKTtcbiAgICAgICAgdGhpcy5fY29pbi5zY2FsZSA9IDAuNDtcbiAgICAgICAgdGhpcy5fY29pbi5hbmdsZSA9IDM2MCAqIE1hdGgucmFuZG9tKCk7XG4gICAgICAgIGxldCByYWRpdXM6IG51bWJlciA9ICgoTWF0aC5hYnMoZW5kUG9zLnkpIC8gTWF0aC5jb3MoKE1hdGguUEkgKiAyKSAvIDM2MCkpICogYW5nbGUpIC8gMjtcbiAgICAgICAgbGV0IHRyYW5nbGVMZW46IG51bWJlciA9IHJhZGl1cyAqIE1hdGguc2luKChNYXRoLlBJICogMikgLyAzNjApICogYW5nbGU7XG4gICAgICAgIGxldCBwZWFrMTogY2MuVmVjMiA9IGNjLnYyKHN0YXJ0UG9zLnggKyB0cmFuZ2xlTGVuLCBzdGFydFBvcy55IC0gc3RhcnRQb3MueSAvIDIpO1xuICAgICAgICBsZXQgdHJvdWdoMTogY2MuVmVjMiA9IGNjLnYyKHN0YXJ0UG9zLnggLSB0cmFuZ2xlTGVuICogMiwgc3RhcnRQb3MueSAtIHN0YXJ0UG9zLnkgLyAyKTtcbiAgICAgICAgbGV0IHBlYWsyOiBjYy5WZWMyID0gY2MudjIoZW5kUG9zLnggLSB0cmFuZ2xlTGVuICogMiwgZW5kUG9zLnkgKyBzdGFydFBvcy55IC8gMik7XG4gICAgICAgIGxldCBiZXppZXJDdXJ2ZTogY2MuVmVjMltdID0gW3BlYWsxLCBwZWFrMiwgZW5kUG9zXTtcbiAgICAgICAgdGhpcy5fY29pbi5ydW5BY3Rpb24oXG4gICAgICAgICAgICBjY1xuICAgICAgICAgICAgICAgIC5zZXF1ZW5jZShcbiAgICAgICAgICAgICAgICAgICAgY2MuYmV6aWVyVG8oMC41LCBiZXppZXJDdXJ2ZSksXG4gICAgICAgICAgICAgICAgICAgIGNjLmNhbGxGdW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb2luLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2luLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmVhc2luZyhjYy5lYXNlSW5PdXQoMS4yKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVncmVlMzBDb2luc0xlZnQoKTogdm9pZCB7XG4gICAgICAgIGxldCBub2RlTGVmdFg6IG51bWJlciA9IHRoaXMuX3JhZGl1cztcbiAgICAgICAgbGV0IG5vZGVZOiBudW1iZXIgPSB0aGlzLl9yYWRpdXMgKiBNYXRoLnRhbigoKE1hdGguUEkgKiAyKSAvIDM2MCkgKiAoNjAgKyBNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgbGV0IG5vZGVMZWZ0UG9zaXRpb246IGNjLlZlYzIgPSBjYy52Mihub2RlTGVmdFgsIG5vZGVZKTtcbiAgICAgICAgbGV0IGVuZExlZnRYOiBudW1iZXIgPSAzMDAgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBsZXQgZW5kWTogbnVtYmVyID0gLWZhaXJ5Z3VpLkdSb290Lmluc3QuaGVpZ2h0O1xuICAgICAgICBsZXQgZW5kUG9zaXRpb246IGNjLlZlYzIgPSBjYy52MihlbmRMZWZ0WCwgZW5kWSk7XG4gICAgICAgIHRoaXMuYmV6aWVyQXJyID0gW3RoaXMuX3N0YXJ0UG9zaXRpb24sIG5vZGVMZWZ0UG9zaXRpb24sIGVuZFBvc2l0aW9uXTtcbiAgICAgICAgdGhpcy5iZXppZXIodGhpcy5fYmV6aWVyVGltZSwgdGhpcy5iZXppZXJBcnIpO1xuICAgIH1cbiAgICBwdWJsaWMgZGVncmVlMzBDb2luc1JpZ2h0KCk6IHZvaWQge1xuICAgICAgICBsZXQgbm9kZVJpZ2h0WDogbnVtYmVyID0gdGhpcy5fd2luZG93V2lkdGggLyAyICsgdGhpcy5fcmFkaXVzO1xuICAgICAgICBsZXQgbm9kZVk6IG51bWJlciA9IHRoaXMuX3JhZGl1cyAqIE1hdGgudGFuKCgoTWF0aC5QSSAqIDIpIC8gMzYwKSAqICg2MCArIE1hdGgucmFuZG9tKCkgKiAxMCkpO1xuICAgICAgICBsZXQgbm9kZVJpZ2h0UG9zaXRpb246IGNjLlZlYzIgPSBjYy52Mihub2RlUmlnaHRYLCBub2RlWSk7XG4gICAgICAgIGxldCBlbmRSaWdodFg6IG51bWJlciA9IHRoaXMuX3dpbmRvd1dpZHRoICsgMTAwICogTWF0aC5yYW5kb20oKTtcbiAgICAgICAgbGV0IGVuZFk6IG51bWJlciA9IC1mYWlyeWd1aS5HUm9vdC5pbnN0LmhlaWdodDtcbiAgICAgICAgbGV0IGVuZFBvc2l0aW9uOiBjYy5WZWMyID0gY2MudjIoZW5kUmlnaHRYLCBlbmRZKTtcbiAgICAgICAgdGhpcy5iZXppZXJBcnIgPSBbdGhpcy5fc3RhcnRQb3NpdGlvbiwgbm9kZVJpZ2h0UG9zaXRpb24sIGVuZFBvc2l0aW9uXTtcbiAgICAgICAgdGhpcy5iZXppZXIodGhpcy5fYmV6aWVyVGltZSwgdGhpcy5iZXppZXJBcnIpO1xuICAgIH1cbiAgICBwdWJsaWMgZGVncmVlNTBDb2luc0xlZnQoKTogdm9pZCB7XG4gICAgICAgIGxldCBub2RlTGVmdFg6IG51bWJlciA9IHRoaXMuX3JhZGl1cztcbiAgICAgICAgbGV0IG5vZGVZOiBudW1iZXIgPSB0aGlzLl9yYWRpdXMgKiBNYXRoLnRhbigoKE1hdGguUEkgKiAyKSAvIDM2MCkgKiAoNTAgKyBNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgICAgbGV0IG5vZGVMZWZ0UG9zaXRpb246IGNjLlZlYzIgPSBjYy52Mihub2RlTGVmdFgsIG5vZGVZKTtcbiAgICAgICAgbGV0IGVuZExlZnRYOiBudW1iZXIgPSAzMDAgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBsZXQgZW5kWTogbnVtYmVyID0gLWZhaXJ5Z3VpLkdSb290Lmluc3QuaGVpZ2h0O1xuICAgICAgICBsZXQgZW5kUG9zaXRpb246IGNjLlZlYzIgPSBjYy52MihlbmRMZWZ0WCwgZW5kWSk7XG4gICAgICAgIHRoaXMuYmV6aWVyQXJyID0gW3RoaXMuX3N0YXJ0UG9zaXRpb24sIG5vZGVMZWZ0UG9zaXRpb24sIGVuZFBvc2l0aW9uXTtcbiAgICAgICAgdGhpcy5iZXppZXIodGhpcy5fYmV6aWVyVGltZSwgdGhpcy5iZXppZXJBcnIpO1xuICAgIH1cbiAgICBwdWJsaWMgZGVncmVlNTBDb2luc1JpZ2h0KCk6IHZvaWQge1xuICAgICAgICBsZXQgbm9kZVJpZ2h0WDogbnVtYmVyID0gdGhpcy5fd2luZG93V2lkdGggLyAyICsgdGhpcy5fcmFkaXVzO1xuICAgICAgICBsZXQgbm9kZVk6IG51bWJlciA9IHRoaXMuX3JhZGl1cyAqIE1hdGgudGFuKCgoTWF0aC5QSSAqIDIpIC8gMzYwKSAqICg1MCArIE1hdGgucmFuZG9tKCkgKiAxMCkpO1xuICAgICAgICBsZXQgbm9kZVJpZ2h0UG9zaXRpb246IGNjLlZlYzIgPSBjYy52Mihub2RlUmlnaHRYLCBub2RlWSk7XG4gICAgICAgIGxldCBlbmRSaWdodFg6IG51bWJlciA9IHRoaXMuX3dpbmRvd1dpZHRoICsgMTAwICogTWF0aC5yYW5kb20oKTtcbiAgICAgICAgbGV0IGVuZFk6IG51bWJlciA9IC1mYWlyeWd1aS5HUm9vdC5pbnN0LmhlaWdodDtcbiAgICAgICAgbGV0IGVuZFBvc2l0aW9uOiBjYy5WZWMyID0gY2MudjIoZW5kUmlnaHRYLCBlbmRZKTtcbiAgICAgICAgdGhpcy5iZXppZXJBcnIgPSBbdGhpcy5fc3RhcnRQb3NpdGlvbiwgbm9kZVJpZ2h0UG9zaXRpb24sIGVuZFBvc2l0aW9uXTtcbiAgICAgICAgdGhpcy5iZXppZXIodGhpcy5fYmV6aWVyVGltZSwgdGhpcy5iZXppZXJBcnIpO1xuICAgIH1cbiAgICBwdWJsaWMgZGVncmVlNzBDb2luc0xlZnQoKTogdm9pZCB7XG4gICAgICAgIGxldCBub2RlTGVmdFg6IG51bWJlciA9IHRoaXMuX3JhZGl1cztcbiAgICAgICAgbGV0IG5vZGVZOiBudW1iZXIgPSB0aGlzLl9yYWRpdXMgKiBNYXRoLnRhbigoKE1hdGguUEkgKiAyKSAvIDM2MCkgKiAoNjAgKyBNYXRoLnJhbmRvbSgpICogNSkpO1xuICAgICAgICBsZXQgbm9kZUxlZnRQb3NpdGlvbjogY2MuVmVjMiA9IGNjLnYyKG5vZGVMZWZ0WCwgbm9kZVkpO1xuICAgICAgICBsZXQgZW5kTGVmdFg6IG51bWJlciA9IHRoaXMuX2NvaW4ueCAtIDYwMCAqIE1hdGgucmFuZG9tKCk7XG4gICAgICAgIGxldCBlbmRZOiBudW1iZXIgPSAtZmFpcnlndWkuR1Jvb3QuaW5zdC5oZWlnaHQ7XG4gICAgICAgIGxldCBlbmRQb3NpdGlvbjogY2MuVmVjMiA9IGNjLnYyKGVuZExlZnRYLCBlbmRZKTtcbiAgICAgICAgdGhpcy5iZXppZXJBcnIgPSBbdGhpcy5fc3RhcnRQb3NpdGlvbiwgbm9kZUxlZnRQb3NpdGlvbiwgZW5kUG9zaXRpb25dO1xuICAgICAgICB0aGlzLmJlemllcih0aGlzLl9iZXppZXJUaW1lLCB0aGlzLmJlemllckFycik7XG4gICAgfVxuICAgIHB1YmxpYyBkZWdyZWU3MENvaW5zUmlnaHQoKTogdm9pZCB7XG4gICAgICAgIGxldCBub2RlUmlnaHRYOiBudW1iZXIgPSB0aGlzLl93aW5kb3dXaWR0aCAvIDIgKyB0aGlzLl9yYWRpdXM7XG4gICAgICAgIGxldCBub2RlWTogbnVtYmVyID0gdGhpcy5fcmFkaXVzICogTWF0aC50YW4oKChNYXRoLlBJICogMikgLyAzNjApICogKDYwICsgTWF0aC5yYW5kb20oKSAqIDUpKTtcbiAgICAgICAgbGV0IG5vZGVSaWdodFBvc2l0aW9uOiBjYy5WZWMyID0gY2MudjIobm9kZVJpZ2h0WCwgbm9kZVkpO1xuICAgICAgICBsZXQgZW5kUmlnaHRYOiBudW1iZXIgPSB0aGlzLl9jb2luLnggKyA2MDAgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICBsZXQgZW5kWTogbnVtYmVyID0gLWZhaXJ5Z3VpLkdSb290Lmluc3QuaGVpZ2h0O1xuICAgICAgICBsZXQgZW5kUG9zaXRpb246IGNjLlZlYzIgPSBjYy52MihlbmRSaWdodFgsIGVuZFkpO1xuICAgICAgICB0aGlzLmJlemllckFyciA9IFt0aGlzLl9zdGFydFBvc2l0aW9uLCBub2RlUmlnaHRQb3NpdGlvbiwgZW5kUG9zaXRpb25dO1xuICAgICAgICB0aGlzLmJlemllcih0aGlzLl9iZXppZXJUaW1lLCB0aGlzLmJlemllckFycik7XG4gICAgfVxuICAgIHB1YmxpYyB2ZXJ0aWNhbENvaW5zTGVmdCgpOiB2b2lkIHtcbiAgICAgICAgbGV0IG5vZGVMZWZ0WDogbnVtYmVyID0gdGhpcy5fd2luZG93V2lkdGggLyAyIC0gKDgwICsgTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICAgIGxldCBub2RlTGVmdFBvc2l0aW9uOiBjYy5WZWMyID0gY2MudjIobm9kZUxlZnRYLCB0aGlzLl93aW5kb3dIZWlnaHQgKyAoNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwKSk7XG4gICAgICAgIGxldCBlbmRMZWZ0WDogbnVtYmVyID0gdGhpcy5fd2luZG93V2lkdGggLyAyIC0gKDgwICsgTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICAgIGxldCBlbmRZOiBudW1iZXIgPSAtZmFpcnlndWkuR1Jvb3QuaW5zdC5oZWlnaHQ7XG4gICAgICAgIHRoaXMuYmV6aWVyQXJyID0gW3RoaXMuX3N0YXJ0UG9zaXRpb24sIG5vZGVMZWZ0UG9zaXRpb24sIGNjLnYyKGVuZExlZnRYLCBlbmRZKV07XG4gICAgICAgIHRoaXMuYmV6aWVyKHRoaXMuX2JlemllclRpbWUsIHRoaXMuYmV6aWVyQXJyKTtcbiAgICB9XG4gICAgcHVibGljIHZlcnRpY2FsQ29pbnNSaWdodCgpOiB2b2lkIHtcbiAgICAgICAgbGV0IG5vZGVSaWdodFg6IG51bWJlciA9IHRoaXMuX3dpbmRvd1dpZHRoIC8gMiArICg4MCArIE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICBsZXQgbm9kZVJpZ2h0UG9zaXRpb246IGNjLlZlYzIgPSBjYy52Mihub2RlUmlnaHRYLCB0aGlzLl93aW5kb3dIZWlnaHQgKyAoNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwKSk7XG4gICAgICAgIGxldCBlbmRSaWdodFg6IG51bWJlciA9IHRoaXMuX3dpbmRvd1dpZHRoIC8gMiArICg4MCArIE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICBsZXQgZW5kWTogbnVtYmVyID0gLWZhaXJ5Z3VpLkdSb290Lmluc3QuaGVpZ2h0O1xuICAgICAgICB0aGlzLmJlemllckFyciA9IFt0aGlzLl9zdGFydFBvc2l0aW9uLCBub2RlUmlnaHRQb3NpdGlvbiwgY2MudjIoZW5kUmlnaHRYLCBlbmRZKV07XG4gICAgICAgIHRoaXMuYmV6aWVyKHRoaXMuX2JlemllclRpbWUsIHRoaXMuYmV6aWVyQXJyKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBiZXppZXIodGltZTogbnVtYmVyLCBiZXppZXJBcnI6IGNjLlZlYzJbXSkge1xuICAgICAgICB0aGlzLmZndWlDb21wb25lbnQubm9kZS5ydW5BY3Rpb24oXG4gICAgICAgICAgICBjYy5zZXF1ZW5jZShcbiAgICAgICAgICAgICAgICBjYy5iZXppZXJUbyh0aW1lLCBiZXppZXJBcnIpLFxuICAgICAgICAgICAgICAgIGNjLmNhbGxGdW5jKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmd1aUNvbXBvbmVudC5ub2RlLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmd1aUNvbXBvbmVudC5ub2RlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19